<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InspIRCd: include/users.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">2.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">include/users.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*       +------------------------------------+</span>
<a name="l00002"></a>00002 <span class="comment"> *       | Inspire Internet Relay Chat Daemon |</span>
<a name="l00003"></a>00003 <span class="comment"> *       +------------------------------------+</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  InspIRCd: (C) 2002-2010 InspIRCd Development Team</span>
<a name="l00006"></a>00006 <span class="comment"> * See: http://wiki.inspircd.org/Credits</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free but copyrighted software; see</span>
<a name="l00009"></a>00009 <span class="comment"> *            the file COPYING for details.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * ---------------------------------------------------</span>
<a name="l00012"></a>00012 <span class="comment"> */</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef USERS_H</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define USERS_H</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;socket.h&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;inspsocket.h&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;dns.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;mode.h&quot;</span>
<a name="l00021"></a>00021 
<a name="l00024"></a>00024 <span class="keyword">enum</span> ClassTypes {
<a name="l00026"></a>00026         CC_ALLOW = 0,
<a name="l00028"></a>00028         CC_DENY  = 1,
<a name="l00030"></a>00030         CC_NAMED = 2
<a name="l00031"></a>00031 };
<a name="l00032"></a>00032 
<a name="l00035"></a>00035 <span class="keyword">enum</span> UserModes {
<a name="l00037"></a>00037         UM_SNOMASK = <span class="charliteral">&#39;s&#39;</span> - 65,
<a name="l00039"></a>00039         UM_WALLOPS = <span class="charliteral">&#39;w&#39;</span> - 65,
<a name="l00041"></a>00041         UM_INVISIBLE = <span class="charliteral">&#39;i&#39;</span> - 65,
<a name="l00043"></a>00043         UM_OPERATOR = <span class="charliteral">&#39;o&#39;</span> - 65
<a name="l00044"></a>00044 };
<a name="l00045"></a>00045 
<a name="l00049"></a>00049 <span class="keyword">enum</span> RegistrationState {
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#ifndef WIN32   // Burlex: This is already defined in win32, luckily it is still 0.</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>        REG_NONE = 0,           <span class="comment">/* Has sent nothing */</span>
<a name="l00053"></a>00053 <span class="preprocessor">#endif</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a>00055         REG_USER = 1,           <span class="comment">/* Has sent USER */</span>
<a name="l00056"></a>00056         REG_NICK = 2,           <span class="comment">/* Has sent NICK */</span>
<a name="l00057"></a>00057         REG_NICKUSER = 3,       <span class="comment">/* Bitwise combination of REG_NICK and REG_USER */</span>
<a name="l00058"></a>00058         REG_ALL = 7             <span class="comment">/* REG_NICKUSER plus next bit along */</span>
<a name="l00059"></a>00059 };
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="keyword">enum</span> UserType {
<a name="l00062"></a>00062         USERTYPE_LOCAL = 1,
<a name="l00063"></a>00063         USERTYPE_REMOTE = 2,
<a name="l00064"></a>00064         USERTYPE_SERVER = 3
<a name="l00065"></a>00065 };
<a name="l00066"></a>00066 
<a name="l00069"></a><a class="code" href="struct_connect_class.html">00069</a> <span class="keyword">struct </span>CoreExport <a class="code" href="struct_connect_class.html">ConnectClass</a> : <span class="keyword">public</span> <a class="code" href="classrefcountbase.html">refcountbase</a>
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071         <a class="code" href="classreference.html">reference&lt;ConfigTag&gt;</a> config;
<a name="l00074"></a><a class="code" href="struct_connect_class.html#ad27601e93063375f28cdb967b687f633">00074</a>         <span class="keywordtype">char</span> <a class="code" href="struct_connect_class.html#ad27601e93063375f28cdb967b687f633">type</a>;
<a name="l00075"></a>00075 
<a name="l00077"></a><a class="code" href="struct_connect_class.html#a43e1c4843b334a0174095aa047b8ee19">00077</a>         <span class="keywordtype">bool</span> <a class="code" href="struct_connect_class.html#a43e1c4843b334a0174095aa047b8ee19">fakelag</a>;
<a name="l00078"></a>00078 
<a name="l00081"></a><a class="code" href="struct_connect_class.html#afd19fe700698c6f135e58829c5ba0629">00081</a>         std::string <a class="code" href="struct_connect_class.html#afd19fe700698c6f135e58829c5ba0629">name</a>;
<a name="l00082"></a>00082 
<a name="l00085"></a><a class="code" href="struct_connect_class.html#a8f8ff64a7cc507d0796f1582a4ac82ae">00085</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a8f8ff64a7cc507d0796f1582a4ac82ae">registration_timeout</a>;
<a name="l00086"></a>00086 
<a name="l00089"></a><a class="code" href="struct_connect_class.html#a3e1e103db90381ac6202749052fa4a74">00089</a>         std::string <a class="code" href="struct_connect_class.html#a3e1e103db90381ac6202749052fa4a74">host</a>;
<a name="l00090"></a>00090 
<a name="l00093"></a><a class="code" href="struct_connect_class.html#a2efe7693d24f0ba643ee63e81a411737">00093</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a2efe7693d24f0ba643ee63e81a411737">pingtime</a>;
<a name="l00094"></a>00094 
<a name="l00098"></a><a class="code" href="struct_connect_class.html#ac04f6b4df65a38d6848866ac81897028">00098</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#ac04f6b4df65a38d6848866ac81897028">softsendqmax</a>;
<a name="l00099"></a>00099 
<a name="l00103"></a><a class="code" href="struct_connect_class.html#ac1fb64870469e581d827a737d9dbc80f">00103</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#ac1fb64870469e581d827a737d9dbc80f">hardsendqmax</a>;
<a name="l00104"></a>00104 
<a name="l00107"></a><a class="code" href="struct_connect_class.html#a3d9813c2cfa2b5bf11143d9316453f20">00107</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a3d9813c2cfa2b5bf11143d9316453f20">recvqmax</a>;
<a name="l00108"></a>00108 
<a name="l00111"></a><a class="code" href="struct_connect_class.html#a7c89a041dc6bf9498944670f3404f1c1">00111</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a7c89a041dc6bf9498944670f3404f1c1">penaltythreshold</a>;
<a name="l00112"></a>00112 
<a name="l00114"></a><a class="code" href="struct_connect_class.html#a1009905fb53296b5bf5b0bca27ef7a89">00114</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a1009905fb53296b5bf5b0bca27ef7a89">commandrate</a>;
<a name="l00115"></a>00115 
<a name="l00118"></a><a class="code" href="struct_connect_class.html#a7ac4d49be792553ab359f974e82aead4">00118</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a7ac4d49be792553ab359f974e82aead4">maxlocal</a>;
<a name="l00119"></a>00119 
<a name="l00122"></a><a class="code" href="struct_connect_class.html#a83e8785ae7aa8234a3bf0c080724d20f">00122</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a83e8785ae7aa8234a3bf0c080724d20f">maxglobal</a>;
<a name="l00123"></a>00123 
<a name="l00126"></a><a class="code" href="struct_connect_class.html#a039228b58be0b716ad84489a0ace7daf">00126</a>         <span class="keywordtype">bool</span> <a class="code" href="struct_connect_class.html#a039228b58be0b716ad84489a0ace7daf">maxconnwarn</a>;
<a name="l00127"></a>00127 
<a name="l00130"></a><a class="code" href="struct_connect_class.html#a0f1133435bd5c0205a1b35fdea9b28cf">00130</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a0f1133435bd5c0205a1b35fdea9b28cf">maxchans</a>;
<a name="l00131"></a>00131 
<a name="l00135"></a><a class="code" href="struct_connect_class.html#a6d2bff84e3b818b0ced929b6db5df392">00135</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a6d2bff84e3b818b0ced929b6db5df392">limit</a>;
<a name="l00136"></a>00136 
<a name="l00139"></a>00139         <a class="code" href="struct_connect_class.html">ConnectClass</a>(<a class="code" href="class_config_tag.html">ConfigTag</a>* tag, <span class="keywordtype">char</span> type, <span class="keyword">const</span> std::string&amp; mask);
<a name="l00142"></a>00142         <a class="code" href="struct_connect_class.html">ConnectClass</a>(<a class="code" href="class_config_tag.html">ConfigTag</a>* tag, <span class="keywordtype">char</span> type, <span class="keyword">const</span> std::string&amp; mask, <span class="keyword">const</span> <a class="code" href="struct_connect_class.html">ConnectClass</a>&amp; parent);
<a name="l00143"></a>00143 
<a name="l00145"></a>00145         <span class="keywordtype">void</span> Update(<span class="keyword">const</span> <a class="code" href="struct_connect_class.html">ConnectClass</a>* newSettings);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="keyword">const</span> std::string&amp; GetName() { <span class="keywordflow">return</span> name; }
<a name="l00148"></a>00148         <span class="keyword">const</span> std::string&amp; GetHost() { <span class="keywordflow">return</span> host; }
<a name="l00149"></a>00149 
<a name="l00152"></a><a class="code" href="struct_connect_class.html#aafbb7ac1ab5114a7869d62690b7fd1a8">00152</a>         time_t GetRegTimeout()
<a name="l00153"></a>00153         {
<a name="l00154"></a>00154                 <span class="keywordflow">return</span> (registration_timeout ? registration_timeout : 90);
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156 
<a name="l00159"></a><a class="code" href="struct_connect_class.html#a9b930b4d940d965d8ed110ea1783b3e2">00159</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> GetPingTime()
<a name="l00160"></a>00160         {
<a name="l00161"></a>00161                 <span class="keywordflow">return</span> (pingtime ? pingtime : 120);
<a name="l00162"></a>00162         }
<a name="l00163"></a>00163 
<a name="l00167"></a><a class="code" href="struct_connect_class.html#a179ec32b10052d659dae5656c7717847">00167</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GetSendqSoftMax()
<a name="l00168"></a>00168         {
<a name="l00169"></a>00169                 <span class="keywordflow">return</span> (softsendqmax ? softsendqmax : 4096);
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171 
<a name="l00174"></a><a class="code" href="struct_connect_class.html#a218314cac5165d2dabc419c23c547091">00174</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GetSendqHardMax()
<a name="l00175"></a>00175         {
<a name="l00176"></a>00176                 <span class="keywordflow">return</span> (hardsendqmax ? hardsendqmax : 0x100000);
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178 
<a name="l00181"></a><a class="code" href="struct_connect_class.html#ae07c7939cb47337ce6c6a8f81730353e">00181</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GetRecvqMax()
<a name="l00182"></a>00182         {
<a name="l00183"></a>00183                 <span class="keywordflow">return</span> (recvqmax ? recvqmax : 4096);
<a name="l00184"></a>00184         }
<a name="l00185"></a>00185 
<a name="l00188"></a><a class="code" href="struct_connect_class.html#a81a56dc19d76506cc8fb515de56fe433">00188</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> GetPenaltyThreshold()
<a name="l00189"></a>00189         {
<a name="l00190"></a>00190                 <span class="keywordflow">return</span> penaltythreshold ? penaltythreshold : (fakelag ? 10 : 20);
<a name="l00191"></a>00191         }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> GetCommandRate()
<a name="l00194"></a>00194         {
<a name="l00195"></a>00195                 <span class="keywordflow">return</span> commandrate ? commandrate : 1000;
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197 
<a name="l00200"></a><a class="code" href="struct_connect_class.html#a386011513b4985d65db40318b5331f72">00200</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GetMaxLocal()
<a name="l00201"></a>00201         {
<a name="l00202"></a>00202                 <span class="keywordflow">return</span> maxlocal;
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204 
<a name="l00207"></a><a class="code" href="struct_connect_class.html#aaef4980b9736a2286ee963ee4d4ddca0">00207</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> GetMaxGlobal()
<a name="l00208"></a>00208         {
<a name="l00209"></a>00209                 <span class="keywordflow">return</span> maxglobal;
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211 };
<a name="l00212"></a>00212 
<a name="l00218"></a><a class="code" href="class_user.html">00218</a> <span class="keyword">class </span>CoreExport <a class="code" href="class_user.html">User</a> : <span class="keyword">public</span> <a class="code" href="class_extensible.html">Extensible</a>
<a name="l00219"></a>00219 {
<a name="l00220"></a>00220  <span class="keyword">private</span>:
<a name="l00223"></a>00223         std::string cached_fullhost;
<a name="l00224"></a>00224 
<a name="l00227"></a>00227         std::string cached_hostip;
<a name="l00228"></a>00228 
<a name="l00231"></a>00231         std::string cached_makehost;
<a name="l00232"></a>00232 
<a name="l00235"></a>00235         std::string cached_fullrealhost;
<a name="l00236"></a>00236 
<a name="l00239"></a>00239         std::string cachedip;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241  <span class="keyword">public</span>:
<a name="l00242"></a>00242 
<a name="l00246"></a><a class="code" href="class_user.html#a7773fec016477ec1eba2f572b34eea76">00246</a>         std::string <a class="code" href="class_user.html#a7773fec016477ec1eba2f572b34eea76">host</a>;
<a name="l00247"></a>00247 
<a name="l00250"></a><a class="code" href="class_user.html#a6e62e3d0a124b4418891e11d76faad7e">00250</a>         time_t <a class="code" href="class_user.html#a6e62e3d0a124b4418891e11d76faad7e">age</a>;
<a name="l00251"></a>00251 
<a name="l00256"></a><a class="code" href="class_user.html#a1d50e3ac7bdcb5fb96d501d91782eb87">00256</a>         time_t <a class="code" href="class_user.html#a1d50e3ac7bdcb5fb96d501d91782eb87">signon</a>;
<a name="l00257"></a>00257 
<a name="l00260"></a><a class="code" href="class_user.html#a249c29ce8508133303dfbe42ed2bf50f">00260</a>         time_t <a class="code" href="class_user.html#a249c29ce8508133303dfbe42ed2bf50f">idle_lastmsg</a>;
<a name="l00261"></a>00261 
<a name="l00266"></a><a class="code" href="class_user.html#a118a42a76b20e6cb6de541d9e08041e9">00266</a>         <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> <a class="code" href="class_user.html#a118a42a76b20e6cb6de541d9e08041e9">client_sa</a>;
<a name="l00267"></a>00267 
<a name="l00272"></a><a class="code" href="class_user.html#a6097de89cf5d8fd945c6782cfa7e89fe">00272</a>         std::string <a class="code" href="class_user.html#a6097de89cf5d8fd945c6782cfa7e89fe">nick</a>;
<a name="l00273"></a>00273 
<a name="l00277"></a><a class="code" href="class_user.html#a9ee4e34fd334d4b5f99fc1fa34b0155a">00277</a>         <span class="keyword">const</span> std::string <a class="code" href="class_user.html#a9ee4e34fd334d4b5f99fc1fa34b0155a">uuid</a>;
<a name="l00278"></a>00278 
<a name="l00282"></a><a class="code" href="class_user.html#a75afe5805a15221777aaf204d99f17c0">00282</a>         std::string <a class="code" href="class_user.html#a75afe5805a15221777aaf204d99f17c0">ident</a>;
<a name="l00283"></a>00283 
<a name="l00287"></a><a class="code" href="class_user.html#a8e572bdf54a71ea5b12365c4228c6731">00287</a>         std::string <a class="code" href="class_user.html#a8e572bdf54a71ea5b12365c4228c6731">dhost</a>;
<a name="l00288"></a>00288 
<a name="l00291"></a><a class="code" href="class_user.html#aa37f981a564b92cb131a4e62e2bd53df">00291</a>         std::string <a class="code" href="class_user.html#aa37f981a564b92cb131a4e62e2bd53df">fullname</a>;
<a name="l00292"></a>00292 
<a name="l00303"></a><a class="code" href="class_user.html#afb1e528b004ddf33833323d4f4473cb6">00303</a>         std::bitset&lt;64&gt; <a class="code" href="class_user.html#afb1e528b004ddf33833323d4f4473cb6">modes</a>;
<a name="l00304"></a>00304 
<a name="l00308"></a><a class="code" href="class_user.html#a98128434f41c8ca644ad0a2429565ef7">00308</a>         std::bitset&lt;64&gt; <a class="code" href="class_user.html#a98128434f41c8ca644ad0a2429565ef7">snomasks</a>;
<a name="l00309"></a>00309 
<a name="l00312"></a><a class="code" href="class_user.html#a0f8babc78ccfb2f6aab5b4d4ecd274c3">00312</a>         UserChanList <a class="code" href="class_user.html#a0f8babc78ccfb2f6aab5b4d4ecd274c3">chans</a>;
<a name="l00313"></a>00313 
<a name="l00316"></a><a class="code" href="class_user.html#ab07fe0b29d3b04bf886fb048e4796cbe">00316</a>         <span class="keyword">const</span> std::string <a class="code" href="class_user.html#ab07fe0b29d3b04bf886fb048e4796cbe">server</a>;
<a name="l00317"></a>00317 
<a name="l00321"></a><a class="code" href="class_user.html#a9f4f7df5529c3547133907148fbb2918">00321</a>         std::string <a class="code" href="class_user.html#a9f4f7df5529c3547133907148fbb2918">awaymsg</a>;
<a name="l00322"></a>00322 
<a name="l00326"></a><a class="code" href="class_user.html#aa0241e8f5196138096077725a628a476">00326</a>         time_t <a class="code" href="class_user.html#aa0241e8f5196138096077725a628a476">awaytime</a>;
<a name="l00327"></a>00327 
<a name="l00330"></a><a class="code" href="class_user.html#a968f02b552b0aac771aef8adac4f823e">00330</a>         <a class="code" href="classreference.html">reference&lt;OperInfo&gt;</a> <a class="code" href="class_user.html#a968f02b552b0aac771aef8adac4f823e">oper</a>;
<a name="l00331"></a>00331 
<a name="l00336"></a><a class="code" href="class_user.html#a62fabba0257a3d6363d6f0159bba856c">00336</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> registered:3;
<a name="l00337"></a>00337 
<a name="l00342"></a><a class="code" href="class_user.html#ae41b92b5c787bccfa3ff625de7522a07">00342</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dns_done:1;
<a name="l00343"></a>00343 
<a name="l00346"></a><a class="code" href="class_user.html#ace73638d21fef8d2785b3999a8abb149">00346</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quietquit:1;
<a name="l00347"></a>00347 
<a name="l00353"></a><a class="code" href="class_user.html#a60f4fab44458bfa3e944a69c762c4273">00353</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quitting:1;
<a name="l00354"></a>00354 
<a name="l00359"></a><a class="code" href="class_user.html#ac65949293e21924a52e5ff14f664129e">00359</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quitting_sendq:1;
<a name="l00360"></a>00360 
<a name="l00363"></a><a class="code" href="class_user.html#a3c67c6d6e5d901d0b994e32bdb8ca7a5">00363</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> exempt:1;
<a name="l00364"></a>00364 
<a name="l00367"></a><a class="code" href="class_user.html#a366e12fdc514b4ddf04441116cc1bbb6">00367</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastping:1;
<a name="l00368"></a>00368 
<a name="l00370"></a><a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">00370</a>         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> usertype:2;
<a name="l00371"></a>00371 
<a name="l00375"></a>00375         <span class="keyword">const</span> <span class="keywordtype">char</span>* GetIPString();
<a name="l00376"></a>00376 
<a name="l00379"></a>00379         <a class="code" href="structirc_1_1sockets_1_1cidr__mask.html">irc::sockets::cidr_mask</a> GetCIDRMask();
<a name="l00380"></a>00380 
<a name="l00384"></a>00384         <span class="keywordtype">bool</span> SetClientIP(<span class="keyword">const</span> <span class="keywordtype">char</span>* sip);
<a name="l00385"></a>00385 
<a name="l00389"></a>00389         <a class="code" href="class_user.html">User</a>(<span class="keyword">const</span> std::string &amp;uid, <span class="keyword">const</span> std::string&amp; srv, <span class="keywordtype">int</span> objtype);
<a name="l00390"></a>00390 
<a name="l00395"></a>00395         <span class="keywordtype">bool</span> CheckLines(<span class="keywordtype">bool</span> doZline = <span class="keyword">false</span>);
<a name="l00396"></a>00396 
<a name="l00402"></a>00402         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullHost();
<a name="l00403"></a>00403 
<a name="l00410"></a>00410         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullRealHost();
<a name="l00411"></a>00411 
<a name="l00415"></a>00415         <span class="keywordtype">void</span> InvalidateCache();
<a name="l00416"></a>00416 
<a name="l00420"></a>00420         <span class="keyword">const</span> <span class="keywordtype">char</span>* FormatNoticeMasks();
<a name="l00421"></a>00421 
<a name="l00428"></a>00428         std::string ProcessNoticeMasks(<span class="keyword">const</span> <span class="keywordtype">char</span> *sm);
<a name="l00429"></a>00429 
<a name="l00434"></a>00434         <span class="keywordtype">bool</span> IsNoticeMaskSet(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sm);
<a name="l00435"></a>00435 
<a name="l00440"></a>00440         <span class="keywordtype">void</span> SetNoticeMask(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sm, <span class="keywordtype">bool</span> value);
<a name="l00441"></a>00441 
<a name="l00445"></a>00445         <span class="keyword">const</span> <span class="keywordtype">char</span>* FormatModes(<span class="keywordtype">bool</span> showparameters = <span class="keyword">false</span>);
<a name="l00446"></a>00446 
<a name="l00451"></a>00451         <span class="keywordtype">bool</span> IsModeSet(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> m);
<a name="l00452"></a>00452 
<a name="l00457"></a>00457         <span class="keywordtype">void</span> SetMode(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> m, <span class="keywordtype">bool</span> value);
<a name="l00458"></a>00458 
<a name="l00465"></a>00465         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasPermission(<span class="keyword">const</span> std::string &amp;command);
<a name="l00466"></a>00466 
<a name="l00475"></a>00475         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasPrivPermission(<span class="keyword">const</span> std::string &amp;privstr, <span class="keywordtype">bool</span> noisy = <span class="keyword">false</span>);
<a name="l00476"></a>00476 
<a name="l00484"></a>00484         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasModePermission(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mode, ModeType type);
<a name="l00485"></a>00485 
<a name="l00490"></a>00490         <span class="keywordtype">char</span>* MakeWildHost();
<a name="l00491"></a>00491 
<a name="l00496"></a>00496         <span class="keyword">const</span> std::string&amp; MakeHost();
<a name="l00497"></a>00497 
<a name="l00502"></a>00502         <span class="keyword">const</span> std::string&amp; MakeHostIP();
<a name="l00503"></a>00503 
<a name="l00506"></a>00506         <span class="keywordtype">void</span> AddToWhoWas();
<a name="l00507"></a>00507 
<a name="l00511"></a>00511         <span class="keywordtype">void</span> Oper(<a class="code" href="class_oper_info.html">OperInfo</a>* info);
<a name="l00512"></a>00512 
<a name="l00520"></a><a class="code" href="class_user.html#ae5f20f125adc5925a8f07df4e1617693">00520</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_user.html#ae5f20f125adc5925a8f07df4e1617693">ForceNickChange</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* newnick) { <span class="keywordflow">return</span> ChangeNick(newnick, <span class="keyword">true</span>); }
<a name="l00521"></a>00521 
<a name="l00525"></a>00525         <span class="keywordtype">void</span> UnOper();
<a name="l00526"></a>00526 
<a name="l00530"></a>00530         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keyword">const</span> std::string &amp;text);
<a name="l00531"></a>00531 
<a name="l00537"></a>00537         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keyword">const</span> <span class="keywordtype">char</span> *text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00538"></a>00538 
<a name="l00543"></a>00543         <span class="keywordtype">void</span> WriteServ(const std::<span class="keywordtype">string</span>&amp; text);
<a name="l00544"></a>00544 
<a name="l00550"></a>00550         <span class="keywordtype">void</span> WriteServ(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00551"></a>00551 
<a name="l00552"></a>00552         <span class="keywordtype">void</span> WriteNumeric(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="keywordtype">void</span> WriteNumeric(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric, const std::<span class="keywordtype">string</span> &amp;text);
<a name="l00555"></a>00555 
<a name="l00560"></a>00560         <span class="keywordtype">void</span> WriteFrom(<a class="code" href="class_user.html">User</a> *user, const std::<span class="keywordtype">string</span> &amp;text);
<a name="l00561"></a>00561 
<a name="l00567"></a>00567         <span class="keywordtype">void</span> WriteFrom(<a class="code" href="class_user.html">User</a> *user, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00568"></a>00568 
<a name="l00573"></a>00573         <span class="keywordtype">void</span> WriteTo(<a class="code" href="class_user.html">User</a> *dest, const std::<span class="keywordtype">string</span> &amp;data);
<a name="l00574"></a>00574 
<a name="l00580"></a>00580         <span class="keywordtype">void</span> WriteTo(<a class="code" href="class_user.html">User</a> *dest, const <span class="keywordtype">char</span> *data, ...) CUSTOM_PRINTF(3, 4);
<a name="l00581"></a>00581 
<a name="l00585"></a>00585         <span class="keywordtype">void</span> WriteCommonRaw(const std::<span class="keywordtype">string</span> &amp;line, <span class="keywordtype">bool</span> include_self = true);
<a name="l00586"></a>00586 
<a name="l00591"></a>00591         <span class="keywordtype">void</span> WriteCommon(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00592"></a>00592 
<a name="l00597"></a>00597         <span class="keywordtype">void</span> WriteCommonExcept(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00598"></a>00598 
<a name="l00604"></a>00604         <span class="keywordtype">void</span> WriteCommonQuit(const std::<span class="keywordtype">string</span> &amp;normal_text, const std::<span class="keywordtype">string</span> &amp;oper_text);
<a name="l00605"></a>00605 
<a name="l00610"></a>00610         <span class="keywordtype">void</span> SendText(const std::<span class="keywordtype">string</span> &amp;LinePrefix, std::stringstream &amp;TextStream);
<a name="l00611"></a>00611 
<a name="l00614"></a>00614         virtual <span class="keywordtype">void</span> SendText(const std::<span class="keywordtype">string</span>&amp; line) = 0;
<a name="l00615"></a>00615 
<a name="l00618"></a>00618         <span class="keywordtype">void</span> SendText(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00619"></a>00619 
<a name="l00624"></a>00624         <span class="keywordtype">bool</span> SharesChannelWith(<a class="code" href="class_user.html">User</a> *other);
<a name="l00625"></a>00625 
<a name="l00632"></a>00632         <span class="keywordtype">void</span> DoHostCycle(const std::<span class="keywordtype">string</span> &amp;quitline);
<a name="l00633"></a>00633 
<a name="l00642"></a>00642         <span class="keywordtype">bool</span> ChangeDisplayedHost(const <span class="keywordtype">char</span>* host);
<a name="l00643"></a>00643 
<a name="l00651"></a>00651         <span class="keywordtype">bool</span> ChangeIdent(const <span class="keywordtype">char</span>* newident);
<a name="l00652"></a>00652 
<a name="l00660"></a>00660         <span class="keywordtype">bool</span> ChangeName(const <span class="keywordtype">char</span>* gecos);
<a name="l00661"></a>00661 
<a name="l00667"></a>00667         <span class="keywordtype">bool</span> ChangeNick(const std::<span class="keywordtype">string</span>&amp; newnick, <span class="keywordtype">bool</span> force = false);
<a name="l00668"></a>00668 
<a name="l00677"></a>00677         <span class="keywordtype">void</span> SendAll(const <span class="keywordtype">char</span>* command, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00678"></a>00678 
<a name="l00684"></a>00684         std::<span class="keywordtype">string</span> ChannelList(<a class="code" href="class_user.html">User</a>* source, <span class="keywordtype">bool</span> spy);
<a name="l00685"></a>00685 
<a name="l00691"></a>00691         <span class="keywordtype">void</span> SplitChanList(<a class="code" href="class_user.html">User</a>* dest, const std::<span class="keywordtype">string</span> &amp;cl);
<a name="l00692"></a>00692 
<a name="l00696"></a>00696         <span class="keywordtype">void</span> PurgeEmptyChannels();
<a name="l00697"></a>00697 
<a name="l00701"></a>00701         virtual <a class="code" href="struct_connect_class.html">ConnectClass</a>* GetClass();
<a name="l00702"></a>00702 
<a name="l00705"></a>00705         virtual ~<a class="code" href="class_user.html">User</a>();
<a name="l00706"></a>00706         virtual <a class="code" href="class_cull_result.html">CullResult</a> cull();
<a name="l00707"></a>00707 };
<a name="l00708"></a>00708 
<a name="l00709"></a><a class="code" href="class_user_i_o_handler.html">00709</a> class CoreExport <a class="code" href="class_user_i_o_handler.html">UserIOHandler</a> : public <a class="code" href="class_stream_socket.html">StreamSocket</a>
<a name="l00710"></a>00710 {
<a name="l00711"></a>00711  <span class="keyword">public</span>:
<a name="l00712"></a>00712         <a class="code" href="class_local_user.html">LocalUser</a>* <span class="keyword">const</span> user;
<a name="l00713"></a>00713         <a class="code" href="class_user_i_o_handler.html">UserIOHandler</a>(<a class="code" href="class_local_user.html">LocalUser</a>* me) : user(me) {}
<a name="l00714"></a>00714         <span class="keywordtype">void</span> OnDataReady();
<a name="l00715"></a>00715         <span class="keywordtype">void</span> OnError(BufferedSocketError error);
<a name="l00716"></a>00716 
<a name="l00722"></a>00722         <span class="keywordtype">void</span> AddWriteBuf(<span class="keyword">const</span> std::string &amp;data);
<a name="l00723"></a>00723 };
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> already_sent_t;
<a name="l00726"></a>00726 
<a name="l00727"></a><a class="code" href="class_local_user.html">00727</a> <span class="keyword">class </span>CoreExport <a class="code" href="class_local_user.html">LocalUser</a> : <span class="keyword">public</span> <a class="code" href="class_user.html">User</a>
<a name="l00728"></a>00728 {
<a name="l00733"></a>00733         InvitedList invites;
<a name="l00734"></a>00734 
<a name="l00735"></a>00735  <span class="keyword">public</span>:
<a name="l00736"></a>00736         <a class="code" href="class_local_user.html">LocalUser</a>(<span class="keywordtype">int</span> fd, <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a>* client, <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a>* server);
<a name="l00737"></a>00737         <a class="code" href="class_cull_result.html">CullResult</a> cull();
<a name="l00738"></a>00738 
<a name="l00739"></a>00739         <a class="code" href="class_user_i_o_handler.html">UserIOHandler</a> eh;
<a name="l00740"></a>00740 
<a name="l00743"></a><a class="code" href="class_local_user.html#a704cf0122ba2d45e727c32c89af3746b">00743</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a704cf0122ba2d45e727c32c89af3746b">bytes_in</a>;
<a name="l00744"></a>00744 
<a name="l00747"></a><a class="code" href="class_local_user.html#ad7d162110cc664438fb6ba97cb635700">00747</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#ad7d162110cc664438fb6ba97cb635700">bytes_out</a>;
<a name="l00748"></a>00748 
<a name="l00751"></a><a class="code" href="class_local_user.html#a8e458741c7ebc8603f5868bd241a34ec">00751</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a8e458741c7ebc8603f5868bd241a34ec">cmds_in</a>;
<a name="l00752"></a>00752 
<a name="l00755"></a><a class="code" href="class_local_user.html#aacb51ebcabaa14d7e55a30d74aea4b0b">00755</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#aacb51ebcabaa14d7e55a30d74aea4b0b">cmds_out</a>;
<a name="l00756"></a>00756 
<a name="l00761"></a><a class="code" href="class_local_user.html#adf097769d06e62daefc26973112c7dd6">00761</a>         std::string <a class="code" href="class_local_user.html#adf097769d06e62daefc26973112c7dd6">password</a>;
<a name="l00762"></a>00762 
<a name="l00765"></a><a class="code" href="class_local_user.html#a490f4f7dddd5f5bb8c5c07fffa6eb916">00765</a>         <a class="code" href="classreference.html">reference&lt;ConnectClass&gt;</a> <a class="code" href="class_local_user.html#a490f4f7dddd5f5bb8c5c07fffa6eb916">MyClass</a>;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767         <a class="code" href="struct_connect_class.html">ConnectClass</a>* GetClass();
<a name="l00768"></a>00768 
<a name="l00771"></a>00771         <span class="keywordtype">void</span> CheckClass();
<a name="l00772"></a>00772 
<a name="l00775"></a><a class="code" href="class_local_user.html#a6c148230f483862230f1ffe1a141fe6c">00775</a>         <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> <a class="code" href="class_local_user.html#a6c148230f483862230f1ffe1a141fe6c">server_sa</a>;
<a name="l00776"></a>00776 
<a name="l00780"></a>00780         <span class="keywordtype">int</span> GetServerPort();
<a name="l00781"></a>00781 
<a name="l00784"></a><a class="code" href="class_local_user.html#a1ffe0d9a22725260c11c89e2dda7a030">00784</a>         time_t <a class="code" href="class_local_user.html#a1ffe0d9a22725260c11c89e2dda7a030">nping</a>;
<a name="l00785"></a>00785 
<a name="l00789"></a><a class="code" href="class_local_user.html#a41882847ff97c21107fbcbff4c83bf16">00789</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a41882847ff97c21107fbcbff4c83bf16">CommandFloodPenalty</a>;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791         <span class="keyword">static</span> already_sent_t already_sent_id;
<a name="l00792"></a>00792         already_sent_t already_sent;
<a name="l00793"></a>00793 
<a name="l00796"></a><a class="code" href="class_local_user.html#af0a47d75eeaedddc8b8ba14d4f97e580">00796</a>         std::string <a class="code" href="class_local_user.html#af0a47d75eeaedddc8b8ba14d4f97e580">stored_host</a>;
<a name="l00797"></a>00797 
<a name="l00802"></a>00802         <span class="keywordtype">void</span> StartDNSLookup();
<a name="l00803"></a>00803 
<a name="l00807"></a>00807         <span class="keywordtype">void</span> FullConnect();
<a name="l00808"></a>00808 
<a name="l00813"></a>00813         <span class="keywordtype">void</span> SetClass(<span class="keyword">const</span> std::string &amp;explicit_name = <span class="stringliteral">&quot;&quot;</span>);
<a name="l00814"></a>00814 
<a name="l00815"></a>00815         <span class="keywordtype">void</span> SendText(<span class="keyword">const</span> std::string&amp; line);
<a name="l00816"></a>00816         <span class="keywordtype">void</span> Write(<span class="keyword">const</span> std::string&amp; text);
<a name="l00817"></a>00817         <span class="keywordtype">void</span> Write(<span class="keyword">const</span> <span class="keywordtype">char</span>*, ...) CUSTOM_PRINTF(2, 3);
<a name="l00818"></a>00818 
<a name="l00822"></a>00822         InvitedList* GetInviteList();
<a name="l00823"></a>00823 
<a name="l00828"></a>00828         <span class="keywordtype">bool</span> IsInvited(const irc::<span class="keywordtype">string</span> &amp;channel);
<a name="l00829"></a>00829 
<a name="l00834"></a>00834         <span class="keywordtype">void</span> InviteTo(const irc::<span class="keywordtype">string</span> &amp;channel, time_t timeout);
<a name="l00835"></a>00835 
<a name="l00841"></a>00841         <span class="keywordtype">void</span> RemoveInvite(const irc::<span class="keywordtype">string</span> &amp;channel);
<a name="l00842"></a>00842 
<a name="l00849"></a>00849         <span class="keywordtype">bool</span> HasPermission(const std::<span class="keywordtype">string</span> &amp;command);
<a name="l00850"></a>00850 
<a name="l00859"></a>00859         <span class="keywordtype">bool</span> HasPrivPermission(const std::<span class="keywordtype">string</span> &amp;privstr, <span class="keywordtype">bool</span> noisy = false);
<a name="l00860"></a>00860 
<a name="l00868"></a>00868         <span class="keywordtype">bool</span> HasModePermission(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mode, ModeType type);
<a name="l00869"></a>00869 };
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="class_remote_user.html">00871</a> class CoreExport <a class="code" href="class_remote_user.html">RemoteUser</a> : public <a class="code" href="class_user.html">User</a>
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873  <span class="keyword">public</span>:
<a name="l00874"></a>00874         <a class="code" href="class_remote_user.html">RemoteUser</a>(<span class="keyword">const</span> std::string&amp; uid, <span class="keyword">const</span> std::string&amp; srv) : User(uid, srv, USERTYPE_REMOTE)
<a name="l00875"></a>00875         {
<a name="l00876"></a>00876         }
<a name="l00877"></a>00877         <span class="keyword">virtual</span> <span class="keywordtype">void</span> SendText(<span class="keyword">const</span> std::string&amp; line);
<a name="l00878"></a>00878 };
<a name="l00879"></a>00879 
<a name="l00880"></a><a class="code" href="class_fake_user.html">00880</a> <span class="keyword">class </span>CoreExport <a class="code" href="class_fake_user.html">FakeUser</a> : <span class="keyword">public</span> <a class="code" href="class_user.html">User</a>
<a name="l00881"></a>00881 {
<a name="l00882"></a>00882  <span class="keyword">public</span>:
<a name="l00883"></a>00883         <a class="code" href="class_fake_user.html">FakeUser</a>(<span class="keyword">const</span> std::string &amp;uid, <span class="keyword">const</span> std::string&amp; srv) : <a class="code" href="class_user.html">User</a>(uid, srv, USERTYPE_SERVER)
<a name="l00884"></a>00884         {
<a name="l00885"></a>00885                 nick = srv;
<a name="l00886"></a>00886         }
<a name="l00887"></a>00887 
<a name="l00888"></a>00888         <span class="keyword">virtual</span> <a class="code" href="class_cull_result.html">CullResult</a> cull();
<a name="l00889"></a>00889         <span class="keyword">virtual</span> <span class="keywordtype">void</span> SendText(<span class="keyword">const</span> std::string&amp; line);
<a name="l00890"></a>00890         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullHost();
<a name="l00891"></a>00891         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullRealHost();
<a name="l00892"></a>00892 };
<a name="l00893"></a>00893 
<a name="l00894"></a>00894 <span class="comment">/* Faster than dynamic_cast */</span>
<a name="l00896"></a>00896 <span class="keyword">inline</span> <a class="code" href="class_local_user.html">LocalUser</a>* IS_LOCAL(<a class="code" href="class_user.html">User</a>* u)
<a name="l00897"></a>00897 {
<a name="l00898"></a>00898         <span class="keywordflow">return</span> u-&gt;<a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">usertype</a> == USERTYPE_LOCAL ? <span class="keyword">static_cast&lt;</span><a class="code" href="class_local_user.html">LocalUser</a>*<span class="keyword">&gt;</span>(u) : NULL;
<a name="l00899"></a>00899 }
<a name="l00901"></a>00901 <span class="keyword">inline</span> <a class="code" href="class_remote_user.html">RemoteUser</a>* IS_REMOTE(<a class="code" href="class_user.html">User</a>* u)
<a name="l00902"></a>00902 {
<a name="l00903"></a>00903         <span class="keywordflow">return</span> u-&gt;<a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">usertype</a> == USERTYPE_REMOTE ? <span class="keyword">static_cast&lt;</span><a class="code" href="class_remote_user.html">RemoteUser</a>*<span class="keyword">&gt;</span>(u) : NULL;
<a name="l00904"></a>00904 }
<a name="l00906"></a>00906 <span class="keyword">inline</span> <a class="code" href="class_fake_user.html">FakeUser</a>* IS_SERVER(<a class="code" href="class_user.html">User</a>* u)
<a name="l00907"></a>00907 {
<a name="l00908"></a>00908         <span class="keywordflow">return</span> u-&gt;<a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">usertype</a> == USERTYPE_SERVER ? <span class="keyword">static_cast&lt;</span><a class="code" href="class_fake_user.html">FakeUser</a>*<span class="keyword">&gt;</span>(u) : NULL;
<a name="l00909"></a>00909 }
<a name="l00911"></a>00911 <span class="preprocessor">#define IS_OPER(x) (x-&gt;oper)</span>
<a name="l00912"></a>00912 <span class="preprocessor"></span>
<a name="l00913"></a>00913 <span class="preprocessor">#define IS_AWAY(x) (!x-&gt;awaymsg.empty())</span>
<a name="l00914"></a>00914 <span class="preprocessor"></span>
<a name="l00917"></a><a class="code" href="class_user_resolver.html">00917</a> <span class="keyword">class </span>CoreExport <a class="code" href="class_user_resolver.html">UserResolver</a> : <span class="keyword">public</span> <a class="code" href="class_resolver.html">Resolver</a>
<a name="l00918"></a>00918 {
<a name="l00919"></a>00919  <span class="keyword">private</span>:
<a name="l00921"></a>00921         std::string uuid;
<a name="l00924"></a>00924         <span class="keywordtype">bool</span> fwd;
<a name="l00925"></a>00925  <span class="keyword">public</span>:
<a name="l00933"></a>00933         <a class="code" href="class_user_resolver.html">UserResolver</a>(<a class="code" href="class_local_user.html">LocalUser</a>* user, std::string to_resolve, QueryType qt, <span class="keywordtype">bool</span> &amp;cache);
<a name="l00934"></a>00934 
<a name="l00940"></a>00940         <span class="keywordtype">void</span> OnLookupComplete(<span class="keyword">const</span> std::string &amp;result, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ttl, <span class="keywordtype">bool</span> cached);
<a name="l00941"></a>00941 
<a name="l00946"></a>00946         <span class="keywordtype">void</span> OnError(ResolverError e, <span class="keyword">const</span> std::string &amp;errormessage);
<a name="l00947"></a>00947 };
<a name="l00948"></a>00948 
<a name="l00949"></a>00949 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
