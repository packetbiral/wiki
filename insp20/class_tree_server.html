<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InspIRCd: TreeServer Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">2.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">TreeServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="treeserver_8h_source.html">treeserver.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for TreeServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_tree_server.png" usemap="#TreeServer_map" alt=""/>
  <map id="TreeServer_map" name="TreeServer_map">
<area href="classclassbase.html" alt="classbase" shape="rect" coords="0,0,77,24"/>
</map>
 </div></div>

<p><a href="class_tree_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0edf090e30db1334064a0abbbcace534"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a0edf090e30db1334064a0abbbcace534">TreeServer</a> (<a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *Util, std::string Name, std::string Desc, const std::string &amp;id)</td></tr>
<tr class="memitem:a26d04306238c473293935ed37fa51559"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a26d04306238c473293935ed37fa51559">TreeServer</a> (<a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *Util, std::string Name, std::string Desc, const std::string &amp;id, <a class="el" href="class_tree_server.html">TreeServer</a> *Above, <a class="el" href="class_tree_socket.html">TreeSocket</a> *Sock, bool Hide)</td></tr>
<tr class="memitem:a741ea846b67ab1e0d7154280b1481977"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a741ea846b67ab1e0d7154280b1481977"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>QuitUsers</b> (const std::string &amp;reason)</td></tr>
<tr class="memitem:a89189137d4c3a97ee0868f1fdeb6499b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a89189137d4c3a97ee0868f1fdeb6499b">AddHashEntry</a> ()</td></tr>
<tr class="memitem:acc6704f4a2906851819440929a7a53b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#acc6704f4a2906851819440929a7a53b7">DelHashEntry</a> ()</td></tr>
<tr class="memitem:a1d33211c566e0ce886851397a7ee98ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a1d33211c566e0ce886851397a7ee98ce">GetRoute</a> ()</td></tr>
<tr class="memitem:a470433386484990829f8c17fb193e989"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a470433386484990829f8c17fb193e989">GetName</a> ()</td></tr>
<tr class="memitem:a2ebc4893e9d13386292b43d12f8b8e15"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a2ebc4893e9d13386292b43d12f8b8e15">GetDesc</a> ()</td></tr>
<tr class="memitem:a6ad4982952c32dd097a4151273820b41"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a6ad4982952c32dd097a4151273820b41">GetVersion</a> ()</td></tr>
<tr class="memitem:a853a017006ee93a9059b2c6c979d50c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a853a017006ee93a9059b2c6c979d50c7">SetNextPingTime</a> (time_t t)</td></tr>
<tr class="memitem:a3d2aa05d0cb46390128c827400d151f2"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a3d2aa05d0cb46390128c827400d151f2">NextPingTime</a> ()</td></tr>
<tr class="memitem:aa328c2006c221251ac433365c328c477"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#aa328c2006c221251ac433365c328c477">AnsweredLastPing</a> ()</td></tr>
<tr class="memitem:a8bb0ecd3c966849669994c0d425d74be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a8bb0ecd3c966849669994c0d425d74be">SetPingFlag</a> ()</td></tr>
<tr class="memitem:a99318b1aee3a67b336c1a92a9acac28e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a99318b1aee3a67b336c1a92a9acac28e">GetUserCount</a> ()</td></tr>
<tr class="memitem:a8617ed66ad3d15efd32943afa471ba2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a8617ed66ad3d15efd32943afa471ba2b">SetUserCount</a> (int diff)</td></tr>
<tr class="memitem:a502527a42506b0397ba04565ac8c7d2b"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a502527a42506b0397ba04565ac8c7d2b">GetOperCount</a> ()</td></tr>
<tr class="memitem:aceca87fe449d297531e3ced53d44ea15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#aceca87fe449d297531e3ced53d44ea15">SetOperCount</a> (int diff)</td></tr>
<tr class="memitem:ac22493239d3ab6a28633bd0792c4ae12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tree_socket.html">TreeSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#ac22493239d3ab6a28633bd0792c4ae12">GetSocket</a> ()</td></tr>
<tr class="memitem:a0f735536865e452e45343eb5de7f6754"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a0f735536865e452e45343eb5de7f6754">GetParent</a> ()</td></tr>
<tr class="memitem:adee9362f317d4603a4b0f1a23cb9c912"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#adee9362f317d4603a4b0f1a23cb9c912">SetVersion</a> (const std::string &amp;<a class="el" href="class_version.html">Version</a>)</td></tr>
<tr class="memitem:ab35542400be4a1160176ca48aafb6916"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#ab35542400be4a1160176ca48aafb6916">ChildCount</a> ()</td></tr>
<tr class="memitem:a372ab3f6814c05c2b7f700887f6cb8ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a372ab3f6814c05c2b7f700887f6cb8ae">GetChild</a> (unsigned int n)</td></tr>
<tr class="memitem:a127f8ceb29aa78055ca6c97e6481eea7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a127f8ceb29aa78055ca6c97e6481eea7">AddChild</a> (<a class="el" href="class_tree_server.html">TreeServer</a> *Child)</td></tr>
<tr class="memitem:a883dfed2b7a0cbd2c16300d8a1619904"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a883dfed2b7a0cbd2c16300d8a1619904">DelChild</a> (<a class="el" href="class_tree_server.html">TreeServer</a> *Child)</td></tr>
<tr class="memitem:ae9ee8923d4d8ce2db950aac6b18f6fb9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#ae9ee8923d4d8ce2db950aac6b18f6fb9">Tidy</a> ()</td></tr>
<tr class="memitem:a926237c45cda4fbf5f2acc7c428f9f71"><td class="memItemLeft" align="right" valign="top">std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a926237c45cda4fbf5f2acc7c428f9f71">GetID</a> ()</td></tr>
<tr class="memitem:a09c85f47f772e6870f00e7d4ddace4a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a09c85f47f772e6870f00e7d4ddace4a4">FinishBurst</a> ()</td></tr>
<tr class="memitem:a134f1d6bedd8054b6073c374fd7375dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a134f1d6bedd8054b6073c374fd7375dc">FinishBurstInternal</a> ()</td></tr>
<tr class="memitem:a13c47673f326b472107ddfe02872edbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cull_result.html">CullResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a13c47673f326b472107ddfe02872edbe">cull</a> ()</td></tr>
<tr class="memitem:a81bf8e7fe10b1654d63169f80f3ff9c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a81bf8e7fe10b1654d63169f80f3ff9c2">~TreeServer</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a48f843000b6effb09c95023e749c2e99"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48f843000b6effb09c95023e749c2e99"></a>
<a class="el" href="class_fake_user.html">FakeUser</a> *const&#160;</td><td class="memItemRight" valign="bottom"><b>ServerUser</b></td></tr>
<tr class="memitem:a5114c822325d7f710417cee03412c16a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5114c822325d7f710417cee03412c16a"></a>
time_t&#160;</td><td class="memItemRight" valign="bottom"><b>age</b></td></tr>
<tr class="memitem:ae5ede0c78e98ceac39640ac994b0be4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae5ede0c78e98ceac39640ac994b0be4c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>Warned</b></td></tr>
<tr class="memitem:a7ee0fae88eecd17921cd0d644200556f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ee0fae88eecd17921cd0d644200556f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>bursting</b></td></tr>
<tr class="memitem:adfd37259f5298e69f7e6c92054f5e52e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#adfd37259f5298e69f7e6c92054f5e52e">LastPingMsec</a></td></tr>
<tr class="memitem:a82972588f1034f0c856a9bf17d8e6f38"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a82972588f1034f0c856a9bf17d8e6f38">rtt</a></td></tr>
<tr class="memitem:a0fb9d656f20417f286eea09ad26b7542"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a0fb9d656f20417f286eea09ad26b7542">StartBurst</a></td></tr>
<tr class="memitem:a2c8175eb3976e57242d546839d5bea5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tree_server.html#a2c8175eb3976e57242d546839d5bea5f">Hidden</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Each server in the tree is represented by one class of type <a class="el" href="class_tree_server.html">TreeServer</a>. A locally connected <a class="el" href="class_tree_server.html">TreeServer</a> can have a class of type <a class="el" href="class_tree_socket.html">TreeSocket</a> associated with it, for remote servers, the <a class="el" href="class_tree_socket.html">TreeSocket</a> entry will be NULL. Each server also maintains a pointer to its parent (NULL if this server is ours, at the top of the tree) and a pointer to its "Route" (see the comments in the constructors below), and also a dynamic list of pointers to its children which can be iterated recursively if required. Creating or deleting objects of type i* <a class="el" href="class_tree_server.html">TreeServer</a> automatically maintains the hash_map of <a class="el" href="class_tree_server.html">TreeServer</a> items, deleting and inserting them as they are created and destroyed. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0edf090e30db1334064a0abbbcace534"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html#a0edf090e30db1334064a0abbbcace534">TreeServer::TreeServer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *&#160;</td>
          <td class="paramname"><em>Util</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>Name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>Desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>We use this constructor only to create the 'root' item, Utils-&gt;TreeRoot, which represents our own server. Therefore, it has no route, no parent, and no socket associated with it. Its version string is our own local version. </p>

</div>
</div>
<a class="anchor" id="a26d04306238c473293935ed37fa51559"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html#a0edf090e30db1334064a0abbbcace534">TreeServer::TreeServer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *&#160;</td>
          <td class="paramname"><em>Util</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>Name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>Desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td>
          <td class="paramname"><em>Above</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tree_socket.html">TreeSocket</a> *&#160;</td>
          <td class="paramname"><em>Sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Hide</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When we create a new server, we call this constructor to initialize it. This constructor initializes the server's Route and Parent, and sets up its ping counters so that it will be pinged one minute from now. </p>

</div>
</div>
<a class="anchor" id="a81bf8e7fe10b1654d63169f80f3ff9c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html#a81bf8e7fe10b1654d63169f80f3ff9c2">TreeServer::~TreeServer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a127f8ceb29aa78055ca6c97e6481eea7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a127f8ceb29aa78055ca6c97e6481eea7">TreeServer::AddChild</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td>
          <td class="paramname"><em>Child</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a child server </p>

</div>
</div>
<a class="anchor" id="a89189137d4c3a97ee0868f1fdeb6499b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a89189137d4c3a97ee0868f1fdeb6499b">TreeServer::AddHashEntry</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method is used to add the structure to the hash_map for linear searches. It is only called by the constructors. </p>

</div>
</div>
<a class="anchor" id="aa328c2006c221251ac433365c328c477"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_tree_server.html#aa328c2006c221251ac433365c328c477">TreeServer::AnsweredLastPing</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if the server answered their last ping </p>

</div>
</div>
<a class="anchor" id="ab35542400be4a1160176ca48aafb6916"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_tree_server.html#ab35542400be4a1160176ca48aafb6916">TreeServer::ChildCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return number of child servers </p>

</div>
</div>
<a class="anchor" id="a13c47673f326b472107ddfe02872edbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cull_result.html">CullResult</a> <a class="el" href="class_tree_server.html#a13c47673f326b472107ddfe02872edbe">TreeServer::cull</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called just prior to destruction via cull list. </p>

<p>Reimplemented from <a class="el" href="classclassbase.html#a2a773ec2f42d047e0ce250553f44d831">classbase</a>.</p>

</div>
</div>
<a class="anchor" id="a883dfed2b7a0cbd2c16300d8a1619904"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_tree_server.html#a883dfed2b7a0cbd2c16300d8a1619904">TreeServer::DelChild</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tree_server.html">TreeServer</a> *&#160;</td>
          <td class="paramname"><em>Child</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a child server, return false if it didn't exist. </p>

</div>
</div>
<a class="anchor" id="acc6704f4a2906851819440929a7a53b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#acc6704f4a2906851819440929a7a53b7">TreeServer::DelHashEntry</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method removes the reference to this object from the hash_map which is used for linear searches. It is only called by the default destructor. </p>

</div>
</div>
<a class="anchor" id="a09c85f47f772e6870f00e7d4ddace4a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a09c85f47f772e6870f00e7d4ddace4a4">TreeServer::FinishBurst</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Marks a server as having finished bursting and performs appropriate actions. </p>

</div>
</div>
<a class="anchor" id="a134f1d6bedd8054b6073c374fd7375dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a134f1d6bedd8054b6073c374fd7375dc">TreeServer::FinishBurstInternal</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Recursive call for child servers </p>

</div>
</div>
<a class="anchor" id="a372ab3f6814c05c2b7f700887f6cb8ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html">TreeServer</a> * <a class="el" href="class_tree_server.html#a372ab3f6814c05c2b7f700887f6cb8ae">TreeServer::GetChild</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a child server indexed 0..n </p>

</div>
</div>
<a class="anchor" id="a2ebc4893e9d13386292b43d12f8b8e15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_tree_server.html#a2ebc4893e9d13386292b43d12f8b8e15">TreeServer::GetDesc</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get server description (GECOS) </p>

</div>
</div>
<a class="anchor" id="a926237c45cda4fbf5f2acc7c428f9f71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string &amp; <a class="el" href="class_tree_server.html#a926237c45cda4fbf5f2acc7c428f9f71">TreeServer::GetID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get server ID </p>

</div>
</div>
<a class="anchor" id="a470433386484990829f8c17fb193e989"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_tree_server.html#a470433386484990829f8c17fb193e989">TreeServer::GetName</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get server name </p>

</div>
</div>
<a class="anchor" id="a502527a42506b0397ba04565ac8c7d2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_tree_server.html#a502527a42506b0397ba04565ac8c7d2b">TreeServer::GetOperCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the numbers of opers on this server. </p>

</div>
</div>
<a class="anchor" id="a0f735536865e452e45343eb5de7f6754"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html">TreeServer</a> * <a class="el" href="class_tree_server.html#a0f735536865e452e45343eb5de7f6754">TreeServer::GetParent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the parent server. For the root node, this returns NULL. </p>

</div>
</div>
<a class="anchor" id="a1d33211c566e0ce886851397a7ee98ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_server.html">TreeServer</a> * <a class="el" href="class_tree_server.html#a1d33211c566e0ce886851397a7ee98ce">TreeServer::GetRoute</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get route. The 'route' is defined as the locally- connected server which can be used to reach this server.</p>
<p>These accessors etc should be pretty self- explanitory. </p>

</div>
</div>
<a class="anchor" id="ac22493239d3ab6a28633bd0792c4ae12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tree_socket.html">TreeSocket</a> * <a class="el" href="class_tree_server.html#ac22493239d3ab6a28633bd0792c4ae12">TreeServer::GetSocket</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the <a class="el" href="class_tree_socket.html">TreeSocket</a> pointer for local servers. For remote servers, this returns NULL. </p>

</div>
</div>
<a class="anchor" id="a99318b1aee3a67b336c1a92a9acac28e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_tree_server.html#a99318b1aee3a67b336c1a92a9acac28e">TreeServer::GetUserCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the number of users on this server. </p>

</div>
</div>
<a class="anchor" id="a6ad4982952c32dd097a4151273820b41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_tree_server.html#a6ad4982952c32dd097a4151273820b41">TreeServer::GetVersion</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get server version string </p>

</div>
</div>
<a class="anchor" id="a3d2aa05d0cb46390128c827400d151f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="class_tree_server.html#a3d2aa05d0cb46390128c827400d151f2">TreeServer::NextPingTime</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the time we are next due to ping this server </p>

</div>
</div>
<a class="anchor" id="a853a017006ee93a9059b2c6c979d50c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a853a017006ee93a9059b2c6c979d50c7">TreeServer::SetNextPingTime</a> </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set time we are next due to ping this server </p>

</div>
</div>
<a class="anchor" id="aceca87fe449d297531e3ced53d44ea15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#aceca87fe449d297531e3ced53d44ea15">TreeServer::SetOperCount</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>diff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Increment or decrement the oper count by diff. </p>

</div>
</div>
<a class="anchor" id="a8bb0ecd3c966849669994c0d425d74be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a8bb0ecd3c966849669994c0d425d74be">TreeServer::SetPingFlag</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the server as responding to its last ping </p>

</div>
</div>
<a class="anchor" id="a8617ed66ad3d15efd32943afa471ba2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#a8617ed66ad3d15efd32943afa471ba2b">TreeServer::SetUserCount</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>diff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Increment or decrement the user count by diff. </p>

</div>
</div>
<a class="anchor" id="adee9362f317d4603a4b0f1a23cb9c912"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_tree_server.html#adee9362f317d4603a4b0f1a23cb9c912">TreeServer::SetVersion</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>Version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the server version string </p>

</div>
</div>
<a class="anchor" id="ae9ee8923d4d8ce2db950aac6b18f6fb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_tree_server.html#ae9ee8923d4d8ce2db950aac6b18f6fb9">TreeServer::Tidy</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes child nodes of this node, and of that node, etc etc. This is used during netsplits to automatically tidy up the server tree. It is slow, we don't use it for much else. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2c8175eb3976e57242d546839d5bea5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_tree_server.html#a2c8175eb3976e57242d546839d5bea5f">TreeServer::Hidden</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>True if this server is hidden </p>

</div>
</div>
<a class="anchor" id="adfd37259f5298e69f7e6c92054f5e52e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_tree_server.html#adfd37259f5298e69f7e6c92054f5e52e">TreeServer::LastPingMsec</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Last ping time in milliseconds, used to calculate round trip time </p>

</div>
</div>
<a class="anchor" id="a82972588f1034f0c856a9bf17d8e6f38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_tree_server.html#a82972588f1034f0c856a9bf17d8e6f38">TreeServer::rtt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Round trip time of last ping </p>

</div>
</div>
<a class="anchor" id="a0fb9d656f20417f286eea09ad26b7542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_tree_server.html#a0fb9d656f20417f286eea09ad26b7542">TreeServer::StartBurst</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When we recieved BURST from this server, used to calculate total burst time at ENDBURST. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/modules/m_spanningtree/<a class="el" href="treeserver_8h_source.html">treeserver.h</a></li>
<li>src/modules/m_spanningtree/treeserver.cpp</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
