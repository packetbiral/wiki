<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InspIRCd: ServernameResolver Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">2.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ServernameResolver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="resolvers_8h_source.html">resolvers.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ServernameResolver:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_servername_resolver.png" usemap="#ServernameResolver_map" alt=""/>
  <map id="ServernameResolver_map" name="ServernameResolver_map">
<area href="class_resolver.html" alt="Resolver" shape="rect" coords="0,0,131,24"/>
</map>
 </div></div>

<p><a href="class_servername_resolver-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af94c56531302605ab5f053af048d76b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_servername_resolver.html#af94c56531302605ab5f053af048d76b5">ServernameResolver</a> (<a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *Util, const std::string &amp;hostname, <a class="el" href="class_link.html">Link</a> *x, bool &amp;cached, QueryType qt, <a class="el" href="class_autoconnect.html">Autoconnect</a> *myac)</td></tr>
<tr class="memitem:ae035a59ef9c54ee3aa6a6e131015a41b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_servername_resolver.html#ae035a59ef9c54ee3aa6a6e131015a41b">OnLookupComplete</a> (const std::string &amp;result, unsigned int ttl, bool cached)</td></tr>
<tr class="memitem:a58323dbad774f1a3459720ad67daa30f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_servername_resolver.html#a58323dbad774f1a3459720ad67daa30f">OnError</a> (ResolverError e, const std::string &amp;errormessage)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class is used to resolve server hostnames during /connect and autoconnect. As of 1.1, the resolver system is seperated out from <a class="el" href="class_buffered_socket.html">BufferedSocket</a>, so we must do this resolver step first ourselves if we need it. This is totally nonblocking, and will callback to OnLookupComplete or OnError when completed. Once it has completed we will have an IP address which we can then use to continue our connection. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af94c56531302605ab5f053af048d76b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_servername_resolver.html#af94c56531302605ab5f053af048d76b5">ServernameResolver::ServernameResolver</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_spanning_tree_utilities.html">SpanningTreeUtilities</a> *&#160;</td>
          <td class="paramname"><em>Util</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_link.html">Link</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>cached</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QueryType&#160;</td>
          <td class="paramname"><em>qt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_autoconnect.html">Autoconnect</a> *&#160;</td>
          <td class="paramname"><em>myac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This class is used to resolve server hostnames during /connect and autoconnect. As of 1.1, the resolver system is seperated out from <a class="el" href="class_buffered_socket.html">BufferedSocket</a>, so we must do this resolver step first ourselves if we need it. This is totally nonblocking, and will callback to OnLookupComplete or OnError when completed. Once it has completed we will have an IP address which we can then use to continue our connection. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a58323dbad774f1a3459720ad67daa30f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_servername_resolver.html#a58323dbad774f1a3459720ad67daa30f">ServernameResolver::OnError</a> </td>
          <td>(</td>
          <td class="paramtype">ResolverError&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>errormessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If an error occurs (such as NXDOMAIN, no domain name found) then this method will be called. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>A ResolverError enum containing the error type which has occured. </td></tr>
    <tr><td class="paramname">errormessage</td><td>The error text of the error that occured.</td></tr>
  </table>
  </dd>
</dl>
<p>Called when an error occurs </p>

<p>Reimplemented from <a class="el" href="class_resolver.html#a271cf7eabbd0f855e49ca63f7396bc61">Resolver</a>.</p>

</div>
</div>
<a class="anchor" id="ae035a59ef9c54ee3aa6a6e131015a41b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_servername_resolver.html#ae035a59ef9c54ee3aa6a6e131015a41b">ServernameResolver::OnLookupComplete</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cached</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When your lookup completes, this method will be called. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>The resulting <a class="el" href="class_d_n_s.html">DNS</a> lookup, either an IP address or a hostname. </td></tr>
    <tr><td class="paramname">ttl</td><td>The time-to-live value of the result, in the instance of a cached result, this is the number of seconds remaining before refresh/expiry. </td></tr>
    <tr><td class="paramname">cached</td><td>True if the result is a cached result, false if it was requested from the <a class="el" href="class_d_n_s.html">DNS</a> server. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_resolver.html#a998e7098ae49d29ac656edc3d6405e0f">Resolver</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/modules/m_spanningtree/<a class="el" href="resolvers_8h_source.html">resolvers.h</a></li>
<li>src/modules/m_spanningtree/resolvers.cpp</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
