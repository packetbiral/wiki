<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InspIRCd: include/users.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">2.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">include/users.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*       +------------------------------------+</span>
<a name="l00002"></a>00002 <span class="comment"> *       | Inspire Internet Relay Chat Daemon |</span>
<a name="l00003"></a>00003 <span class="comment"> *       +------------------------------------+</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  InspIRCd: (C) 2002-2011 InspIRCd Development Team</span>
<a name="l00006"></a>00006 <span class="comment"> * See: http://wiki.inspircd.org/Credits</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free but copyrighted software; see</span>
<a name="l00009"></a>00009 <span class="comment"> *            the file COPYING for details.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * ---------------------------------------------------</span>
<a name="l00012"></a>00012 <span class="comment"> */</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef USERS_H</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define USERS_H</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="keyword">enum</span> ClassTypes {
<a name="l00021"></a>00021         CC_ALLOW = 0,
<a name="l00023"></a>00023         CC_DENY  = 1,
<a name="l00025"></a>00025         CC_NAMED = 2
<a name="l00026"></a>00026 };
<a name="l00027"></a>00027 
<a name="l00030"></a>00030 <span class="keyword">enum</span> UserModes {
<a name="l00032"></a>00032         UM_SNOMASK = <span class="charliteral">&#39;s&#39;</span> - 65,
<a name="l00034"></a>00034         UM_WALLOPS = <span class="charliteral">&#39;w&#39;</span> - 65,
<a name="l00036"></a>00036         UM_INVISIBLE = <span class="charliteral">&#39;i&#39;</span> - 65,
<a name="l00038"></a>00038         UM_OPERATOR = <span class="charliteral">&#39;o&#39;</span> - 65
<a name="l00039"></a>00039 };
<a name="l00040"></a>00040 
<a name="l00044"></a>00044 <span class="keyword">enum</span> RegistrationState {
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef WIN32   // Burlex: This is already defined in win32, luckily it is still 0.</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>        REG_NONE = 0,           <span class="comment">/* Has sent nothing */</span>
<a name="l00048"></a>00048 <span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050         REG_USER = 1,           <span class="comment">/* Has sent USER */</span>
<a name="l00051"></a>00051         REG_NICK = 2,           <span class="comment">/* Has sent NICK */</span>
<a name="l00052"></a>00052         REG_NICKUSER = 3,       <span class="comment">/* Bitwise combination of REG_NICK and REG_USER */</span>
<a name="l00053"></a>00053         REG_ALL = 7             <span class="comment">/* REG_NICKUSER plus next bit along */</span>
<a name="l00054"></a>00054 };
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="keyword">enum</span> UserType {
<a name="l00057"></a>00057         USERTYPE_LOCAL = 1,
<a name="l00058"></a>00058         USERTYPE_REMOTE = 2,
<a name="l00059"></a>00059         USERTYPE_SERVER = 3
<a name="l00060"></a>00060 };
<a name="l00061"></a>00061 
<a name="l00067"></a>00067 <span class="preprocessor">#define UUID_LENGTH 10</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00071"></a><a class="code" href="struct_connect_class.html">00071</a> <span class="keyword">struct </span>CoreExport <a class="code" href="struct_connect_class.html">ConnectClass</a> : <span class="keyword">public</span> <a class="code" href="classrefcountbase.html">refcountbase</a>
<a name="l00072"></a>00072 {
<a name="l00075"></a><a class="code" href="struct_connect_class.html#afd19fe700698c6f135e58829c5ba0629">00075</a>         std::string <a class="code" href="struct_connect_class.html#afd19fe700698c6f135e58829c5ba0629">name</a>;
<a name="l00076"></a>00076 
<a name="l00078"></a><a class="code" href="struct_connect_class.html#a0be4a6a83b99e2ab319a0fd9a7e070a8">00078</a>         <a class="code" href="classreference.html">reference&lt;ConfigTag&gt;</a> <a class="code" href="struct_connect_class.html#a0be4a6a83b99e2ab319a0fd9a7e070a8">config</a>;
<a name="l00079"></a>00079 
<a name="l00081"></a><a class="code" href="struct_connect_class.html#a30c010b7a24cacc02f036c04bc8bbdd1">00081</a>         <a class="code" href="classreference.html">reference&lt;ConnectClass&gt;</a> <a class="code" href="struct_connect_class.html#a30c010b7a24cacc02f036c04bc8bbdd1">parent</a>;
<a name="l00082"></a>00082 
<a name="l00085"></a><a class="code" href="struct_connect_class.html#a7251778d47c613229316d75fa9a36a3a">00085</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> type:2;
<a name="l00086"></a>00086 
<a name="l00088"></a><a class="code" href="struct_connect_class.html#a5adf89c3eca762279abc59539bd2cc2d">00088</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fakelag:1;
<a name="l00089"></a>00089 
<a name="l00092"></a><a class="code" href="struct_connect_class.html#a3e1e103db90381ac6202749052fa4a74">00092</a>         std::string <a class="code" href="struct_connect_class.html#a3e1e103db90381ac6202749052fa4a74">host</a>;
<a name="l00093"></a>00093 
<a name="l00096"></a><a class="code" href="struct_connect_class.html#a8f8ff64a7cc507d0796f1582a4ac82ae">00096</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a8f8ff64a7cc507d0796f1582a4ac82ae">registration_timeout</a>;
<a name="l00097"></a>00097 
<a name="l00100"></a><a class="code" href="struct_connect_class.html#a2efe7693d24f0ba643ee63e81a411737">00100</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a2efe7693d24f0ba643ee63e81a411737">pingtime</a>;
<a name="l00101"></a>00101 
<a name="l00105"></a><a class="code" href="struct_connect_class.html#ac04f6b4df65a38d6848866ac81897028">00105</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#ac04f6b4df65a38d6848866ac81897028">softsendqmax</a>;
<a name="l00106"></a>00106 
<a name="l00110"></a><a class="code" href="struct_connect_class.html#ac1fb64870469e581d827a737d9dbc80f">00110</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#ac1fb64870469e581d827a737d9dbc80f">hardsendqmax</a>;
<a name="l00111"></a>00111 
<a name="l00114"></a><a class="code" href="struct_connect_class.html#a3d9813c2cfa2b5bf11143d9316453f20">00114</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a3d9813c2cfa2b5bf11143d9316453f20">recvqmax</a>;
<a name="l00115"></a>00115 
<a name="l00118"></a><a class="code" href="struct_connect_class.html#a7c89a041dc6bf9498944670f3404f1c1">00118</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a7c89a041dc6bf9498944670f3404f1c1">penaltythreshold</a>;
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="struct_connect_class.html#a1009905fb53296b5bf5b0bca27ef7a89">00121</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a1009905fb53296b5bf5b0bca27ef7a89">commandrate</a>;
<a name="l00122"></a>00122 
<a name="l00125"></a><a class="code" href="struct_connect_class.html#a7ac4d49be792553ab359f974e82aead4">00125</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a7ac4d49be792553ab359f974e82aead4">maxlocal</a>;
<a name="l00126"></a>00126 
<a name="l00129"></a><a class="code" href="struct_connect_class.html#a83e8785ae7aa8234a3bf0c080724d20f">00129</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a83e8785ae7aa8234a3bf0c080724d20f">maxglobal</a>;
<a name="l00130"></a>00130 
<a name="l00133"></a><a class="code" href="struct_connect_class.html#a0f1133435bd5c0205a1b35fdea9b28cf">00133</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_connect_class.html#a0f1133435bd5c0205a1b35fdea9b28cf">maxchans</a>;
<a name="l00134"></a>00134 
<a name="l00138"></a><a class="code" href="struct_connect_class.html#a6d2bff84e3b818b0ced929b6db5df392">00138</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="struct_connect_class.html#a6d2bff84e3b818b0ced929b6db5df392">limit</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         <a class="code" href="struct_connect_class.html">ConnectClass</a>(<a class="code" href="class_config_tag.html">ConfigTag</a>* tag, <a class="code" href="struct_connect_class.html">ConnectClass</a>* parent);
<a name="l00141"></a>00141 
<a name="l00145"></a>00145         <span class="keywordtype">void</span> Update(<span class="keyword">const</span> <a class="code" href="struct_connect_class.html">ConnectClass</a>* newSettings);
<a name="l00146"></a>00146 
<a name="l00148"></a>00148         std::string GetConfig(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; def = <span class="stringliteral">&quot;&quot;</span>);
<a name="l00149"></a>00149 };
<a name="l00150"></a>00150 
<a name="l00156"></a><a class="code" href="class_user.html">00156</a> <span class="keyword">class </span>CoreExport <a class="code" href="class_user.html">User</a> : <span class="keyword">public</span> <a class="code" href="class_extensible.html">Extensible</a>
<a name="l00157"></a>00157 {
<a name="l00158"></a>00158  <span class="keyword">private</span>:
<a name="l00161"></a>00161         std::string cached_fullhost;
<a name="l00162"></a>00162 
<a name="l00165"></a>00165         std::string cachedip;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167  <span class="keyword">public</span>:
<a name="l00168"></a>00168 
<a name="l00172"></a><a class="code" href="class_user.html#a7773fec016477ec1eba2f572b34eea76">00172</a>         std::string <a class="code" href="class_user.html#a7773fec016477ec1eba2f572b34eea76">host</a>;
<a name="l00173"></a>00173 
<a name="l00176"></a><a class="code" href="class_user.html#a6e62e3d0a124b4418891e11d76faad7e">00176</a>         time_t <a class="code" href="class_user.html#a6e62e3d0a124b4418891e11d76faad7e">age</a>;
<a name="l00177"></a>00177 
<a name="l00182"></a><a class="code" href="class_user.html#a1d50e3ac7bdcb5fb96d501d91782eb87">00182</a>         time_t <a class="code" href="class_user.html#a1d50e3ac7bdcb5fb96d501d91782eb87">signon</a>;
<a name="l00183"></a>00183 
<a name="l00186"></a><a class="code" href="class_user.html#a249c29ce8508133303dfbe42ed2bf50f">00186</a>         time_t <a class="code" href="class_user.html#a249c29ce8508133303dfbe42ed2bf50f">idle_lastmsg</a>;
<a name="l00187"></a>00187 
<a name="l00192"></a><a class="code" href="class_user.html#a118a42a76b20e6cb6de541d9e08041e9">00192</a>         <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> <a class="code" href="class_user.html#a118a42a76b20e6cb6de541d9e08041e9">client_sa</a>;
<a name="l00193"></a>00193 
<a name="l00198"></a><a class="code" href="class_user.html#a6097de89cf5d8fd945c6782cfa7e89fe">00198</a>         std::string <a class="code" href="class_user.html#a6097de89cf5d8fd945c6782cfa7e89fe">nick</a>;
<a name="l00199"></a>00199 
<a name="l00203"></a><a class="code" href="class_user.html#a9ee4e34fd334d4b5f99fc1fa34b0155a">00203</a>         <span class="keyword">const</span> std::string <a class="code" href="class_user.html#a9ee4e34fd334d4b5f99fc1fa34b0155a">uuid</a>;
<a name="l00204"></a>00204 
<a name="l00208"></a><a class="code" href="class_user.html#a75afe5805a15221777aaf204d99f17c0">00208</a>         std::string <a class="code" href="class_user.html#a75afe5805a15221777aaf204d99f17c0">ident</a>;
<a name="l00209"></a>00209 
<a name="l00213"></a><a class="code" href="class_user.html#a8e572bdf54a71ea5b12365c4228c6731">00213</a>         std::string <a class="code" href="class_user.html#a8e572bdf54a71ea5b12365c4228c6731">dhost</a>;
<a name="l00214"></a>00214 
<a name="l00217"></a><a class="code" href="class_user.html#aa37f981a564b92cb131a4e62e2bd53df">00217</a>         std::string <a class="code" href="class_user.html#aa37f981a564b92cb131a4e62e2bd53df">fullname</a>;
<a name="l00218"></a>00218 
<a name="l00229"></a><a class="code" href="class_user.html#afb1e528b004ddf33833323d4f4473cb6">00229</a>         std::bitset&lt;64&gt; <a class="code" href="class_user.html#afb1e528b004ddf33833323d4f4473cb6">modes</a>;
<a name="l00230"></a>00230 
<a name="l00234"></a><a class="code" href="class_user.html#a98128434f41c8ca644ad0a2429565ef7">00234</a>         std::bitset&lt;64&gt; <a class="code" href="class_user.html#a98128434f41c8ca644ad0a2429565ef7">snomasks</a>;
<a name="l00235"></a>00235 
<a name="l00238"></a><a class="code" href="class_user.html#a0f8babc78ccfb2f6aab5b4d4ecd274c3">00238</a>         <a class="code" href="class_user_chan_list.html">UserChanList</a> <a class="code" href="class_user.html#a0f8babc78ccfb2f6aab5b4d4ecd274c3">chans</a>;
<a name="l00239"></a>00239 
<a name="l00242"></a><a class="code" href="class_user.html#ab07fe0b29d3b04bf886fb048e4796cbe">00242</a>         <span class="keyword">const</span> std::string <a class="code" href="class_user.html#ab07fe0b29d3b04bf886fb048e4796cbe">server</a>;
<a name="l00243"></a>00243 
<a name="l00247"></a><a class="code" href="class_user.html#a9f4f7df5529c3547133907148fbb2918">00247</a>         std::string <a class="code" href="class_user.html#a9f4f7df5529c3547133907148fbb2918">awaymsg</a>;
<a name="l00248"></a>00248 
<a name="l00252"></a><a class="code" href="class_user.html#aa0241e8f5196138096077725a628a476">00252</a>         time_t <a class="code" href="class_user.html#aa0241e8f5196138096077725a628a476">awaytime</a>;
<a name="l00253"></a>00253 
<a name="l00256"></a><a class="code" href="class_user.html#a968f02b552b0aac771aef8adac4f823e">00256</a>         <a class="code" href="classreference.html">reference&lt;OperInfo&gt;</a> <a class="code" href="class_user.html#a968f02b552b0aac771aef8adac4f823e">oper</a>;
<a name="l00257"></a>00257 
<a name="l00262"></a><a class="code" href="class_user.html#a62fabba0257a3d6363d6f0159bba856c">00262</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> registered:3;
<a name="l00263"></a>00263 
<a name="l00268"></a><a class="code" href="class_user.html#ae41b92b5c787bccfa3ff625de7522a07">00268</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dns_done:1;
<a name="l00269"></a>00269 
<a name="l00272"></a><a class="code" href="class_user.html#ace73638d21fef8d2785b3999a8abb149">00272</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quietquit:1;
<a name="l00273"></a>00273 
<a name="l00279"></a><a class="code" href="class_user.html#a60f4fab44458bfa3e944a69c762c4273">00279</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quitting:1;
<a name="l00280"></a>00280 
<a name="l00285"></a><a class="code" href="class_user.html#ac65949293e21924a52e5ff14f664129e">00285</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quitting_sendq:1;
<a name="l00286"></a>00286 
<a name="l00289"></a><a class="code" href="class_user.html#a3c67c6d6e5d901d0b994e32bdb8ca7a5">00289</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> exempt:1;
<a name="l00290"></a>00290 
<a name="l00293"></a><a class="code" href="class_user.html#a366e12fdc514b4ddf04441116cc1bbb6">00293</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastping:1;
<a name="l00294"></a>00294 
<a name="l00296"></a><a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">00296</a>         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> usertype:2;
<a name="l00297"></a>00297 
<a name="l00303"></a><a class="code" href="class_user.html#a3611009c4a5f0121199365225e3190b7">00303</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> frozen:1;
<a name="l00304"></a>00304 
<a name="l00308"></a>00308         <span class="keyword">const</span> <span class="keywordtype">char</span>* GetIPString();
<a name="l00309"></a>00309 
<a name="l00312"></a>00312         <a class="code" href="structirc_1_1sockets_1_1cidr__mask.html">irc::sockets::cidr_mask</a> GetCIDRMask();
<a name="l00313"></a>00313 
<a name="l00317"></a>00317         <span class="keywordtype">bool</span> SetClientIP(<span class="keyword">const</span> <span class="keywordtype">char</span>* sip);
<a name="l00318"></a>00318 
<a name="l00322"></a>00322         <a class="code" href="class_user.html">User</a>(<span class="keyword">const</span> std::string &amp;uid, <span class="keyword">const</span> std::string&amp; srv, <span class="keywordtype">int</span> objtype);
<a name="l00323"></a>00323 
<a name="l00328"></a>00328         <span class="keywordtype">bool</span> CheckLines(<span class="keywordtype">bool</span> doZline = <span class="keyword">false</span>);
<a name="l00329"></a>00329 
<a name="l00335"></a>00335         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullHost();
<a name="l00336"></a>00336 
<a name="l00343"></a>00343         std::string GetFullRealHost();
<a name="l00344"></a>00344 
<a name="l00348"></a>00348         <span class="keywordtype">void</span> InvalidateCache();
<a name="l00349"></a>00349 
<a name="l00353"></a>00353         <span class="keyword">const</span> <span class="keywordtype">char</span>* FormatNoticeMasks();
<a name="l00354"></a>00354 
<a name="l00361"></a>00361         std::string ProcessNoticeMasks(<span class="keyword">const</span> <span class="keywordtype">char</span> *sm);
<a name="l00362"></a>00362 
<a name="l00367"></a>00367         <span class="keywordtype">bool</span> IsNoticeMaskSet(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sm);
<a name="l00368"></a>00368 
<a name="l00373"></a>00373         <span class="keywordtype">void</span> SetNoticeMask(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sm, <span class="keywordtype">bool</span> value);
<a name="l00374"></a>00374 
<a name="l00378"></a>00378         <span class="keyword">const</span> <span class="keywordtype">char</span>* FormatModes(<span class="keywordtype">bool</span> showparameters = <span class="keyword">false</span>);
<a name="l00379"></a>00379 
<a name="l00384"></a>00384         <span class="keywordtype">bool</span> IsModeSet(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> m);
<a name="l00385"></a>00385 
<a name="l00390"></a>00390         <span class="keywordtype">void</span> SetMode(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> m, <span class="keywordtype">bool</span> value);
<a name="l00391"></a>00391 
<a name="l00398"></a>00398         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasPermission(<span class="keyword">const</span> std::string &amp;command);
<a name="l00399"></a>00399 
<a name="l00408"></a>00408         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasPrivPermission(<span class="keyword">const</span> std::string &amp;privstr, <span class="keywordtype">bool</span> noisy = <span class="keyword">false</span>);
<a name="l00409"></a>00409 
<a name="l00416"></a>00416         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> HasModePermission(<a class="code" href="class_mode_i_d.html">ModeID</a> mode);
<a name="l00417"></a>00417 
<a name="l00422"></a>00422         <span class="keywordtype">char</span>* MakeWildHost();
<a name="l00423"></a>00423 
<a name="l00428"></a>00428         std::string MakeHost();
<a name="l00429"></a>00429 
<a name="l00434"></a>00434         std::string MakeHostIP();
<a name="l00435"></a>00435 
<a name="l00439"></a>00439         <span class="keywordtype">void</span> Oper(<a class="code" href="class_oper_info.html">OperInfo</a>* info);
<a name="l00440"></a>00440 
<a name="l00448"></a><a class="code" href="class_user.html#a0ad579a1dd43364d9830c99d720d5424">00448</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_user.html#a0ad579a1dd43364d9830c99d720d5424">ForceNickChange</a>(<span class="keyword">const</span> std::string&amp; newnick) { <span class="keywordflow">return</span> ChangeNick(newnick, <span class="keyword">true</span>); }
<a name="l00449"></a>00449 
<a name="l00453"></a>00453         <span class="keywordtype">void</span> UnOper();
<a name="l00454"></a>00454 
<a name="l00458"></a>00458         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keyword">const</span> std::string &amp;text);
<a name="l00459"></a>00459 
<a name="l00465"></a>00465         <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keyword">const</span> <span class="keywordtype">char</span> *text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00466"></a>00466 
<a name="l00471"></a>00471         <span class="keywordtype">void</span> WriteServ(const std::<span class="keywordtype">string</span>&amp; text);
<a name="l00472"></a>00472 
<a name="l00478"></a>00478         <span class="keywordtype">void</span> WriteServ(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480         <span class="keywordtype">void</span> WriteNumeric(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         <span class="keywordtype">void</span> WriteNumeric(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric, const std::<span class="keywordtype">string</span> &amp;text);
<a name="l00483"></a>00483 
<a name="l00488"></a>00488         <span class="keywordtype">void</span> WriteFrom(<a class="code" href="class_user.html">User</a> *user, const std::<span class="keywordtype">string</span> &amp;text);
<a name="l00489"></a>00489 
<a name="l00495"></a>00495         <span class="keywordtype">void</span> WriteFrom(<a class="code" href="class_user.html">User</a> *user, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00496"></a>00496 
<a name="l00501"></a>00501         <span class="keywordtype">void</span> WriteTo(<a class="code" href="class_user.html">User</a> *dest, const std::<span class="keywordtype">string</span> &amp;data);
<a name="l00502"></a>00502 
<a name="l00508"></a>00508         <span class="keywordtype">void</span> WriteTo(<a class="code" href="class_user.html">User</a> *dest, const <span class="keywordtype">char</span> *data, ...) CUSTOM_PRINTF(3, 4);
<a name="l00509"></a>00509 
<a name="l00513"></a>00513         <span class="keywordtype">void</span> WriteCommonRaw(const std::<span class="keywordtype">string</span> &amp;line, <span class="keywordtype">bool</span> include_self = true);
<a name="l00514"></a>00514 
<a name="l00519"></a>00519         <span class="keywordtype">void</span> WriteCommon(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00520"></a>00520 
<a name="l00525"></a>00525         <span class="keywordtype">void</span> WriteCommonExcept(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00526"></a>00526 
<a name="l00532"></a>00532         <span class="keywordtype">void</span> WriteCommonQuit(const std::<span class="keywordtype">string</span> &amp;normal_text, const std::<span class="keywordtype">string</span> &amp;oper_text);
<a name="l00533"></a>00533 
<a name="l00538"></a>00538         <span class="keywordtype">void</span> SendText(const std::<span class="keywordtype">string</span> &amp;LinePrefix, std::stringstream &amp;TextStream);
<a name="l00539"></a>00539 
<a name="l00542"></a>00542         virtual <span class="keywordtype">void</span> SendText(const std::<span class="keywordtype">string</span>&amp; line) = 0;
<a name="l00543"></a>00543 
<a name="l00546"></a>00546         <span class="keywordtype">void</span> SendText(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00547"></a>00547 
<a name="l00550"></a>00550         <span class="keywordtype">void</span> SendServerNotice(const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(2, 3);
<a name="l00551"></a>00551 
<a name="l00556"></a>00556         <span class="keywordtype">bool</span> SharesChannelWith(<a class="code" href="class_user.html">User</a> *other);
<a name="l00557"></a>00557 
<a name="l00564"></a>00564         <span class="keywordtype">void</span> DoHostCycle(const std::<span class="keywordtype">string</span> &amp;quitline);
<a name="l00565"></a>00565 
<a name="l00574"></a>00574         <span class="keywordtype">bool</span> ChangeDisplayedHost(const std::<span class="keywordtype">string</span>&amp; host);
<a name="l00575"></a>00575 
<a name="l00583"></a>00583         <span class="keywordtype">bool</span> ChangeIdent(const std::<span class="keywordtype">string</span>&amp; newident);
<a name="l00584"></a>00584 
<a name="l00592"></a>00592         <span class="keywordtype">bool</span> ChangeName(const std::<span class="keywordtype">string</span>&amp; gecos);
<a name="l00593"></a>00593 
<a name="l00599"></a>00599         <span class="keywordtype">bool</span> ChangeNick(const std::<span class="keywordtype">string</span>&amp; newnick, <span class="keywordtype">bool</span> force = false);
<a name="l00600"></a>00600 
<a name="l00609"></a>00609         <span class="keywordtype">void</span> SendAll(const <span class="keywordtype">char</span>* command, const <span class="keywordtype">char</span>* text, ...) CUSTOM_PRINTF(3, 4);
<a name="l00610"></a>00610 
<a name="l00616"></a>00616         std::<span class="keywordtype">string</span> ChannelList(<a class="code" href="class_user.html">User</a>* source, <span class="keywordtype">bool</span> spy);
<a name="l00617"></a>00617 
<a name="l00623"></a>00623         <span class="keywordtype">void</span> SplitChanList(<a class="code" href="class_user.html">User</a>* dest, const std::<span class="keywordtype">string</span> &amp;cl);
<a name="l00624"></a>00624 
<a name="l00628"></a>00628         <span class="keywordtype">void</span> PurgeEmptyChannels();
<a name="l00629"></a>00629 
<a name="l00632"></a>00632         <span class="keywordtype">void</span> PopulateInfoMap(SubstMap&amp; map);
<a name="l00633"></a>00633 
<a name="l00634"></a>00634         virtual <span class="keywordtype">void</span> DoWhois(<a class="code" href="class_user.html">User</a>* src);
<a name="l00635"></a>00635 
<a name="l00638"></a>00638         virtual ~<a class="code" href="class_user.html">User</a>();
<a name="l00639"></a>00639         virtual <a class="code" href="class_cull_result.html">CullResult</a> cull();
<a name="l00640"></a>00640 };
<a name="l00641"></a>00641 
<a name="l00642"></a>00642 class <a class="code" href="class_user_i_o_handler.html">UserIOHandler</a>;
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 typedef <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> already_sent_t;
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="class_local_user.html">00646</a> class CoreExport <a class="code" href="class_local_user.html">LocalUser</a> : public User
<a name="l00647"></a>00647 {
<a name="l00652"></a>00652         InvitedList invites;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654  <span class="keyword">public</span>:
<a name="l00655"></a>00655         <a class="code" href="class_local_user.html">LocalUser</a>(<span class="keywordtype">int</span> fd, <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a>* client, <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a>* server);
<a name="l00656"></a>00656         <a class="code" href="class_cull_result.html">CullResult</a> <a class="code" href="class_extensible.html#a11e8ad72ea9557b4e88c87121858a155">cull</a>();
<a name="l00657"></a>00657 
<a name="l00658"></a>00658         UserIOHandler* <span class="keyword">const</span> eh;
<a name="l00659"></a>00659 
<a name="l00662"></a><a class="code" href="class_local_user.html#a704cf0122ba2d45e727c32c89af3746b">00662</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a704cf0122ba2d45e727c32c89af3746b">bytes_in</a>;
<a name="l00663"></a>00663 
<a name="l00666"></a><a class="code" href="class_local_user.html#ad7d162110cc664438fb6ba97cb635700">00666</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#ad7d162110cc664438fb6ba97cb635700">bytes_out</a>;
<a name="l00667"></a>00667 
<a name="l00670"></a><a class="code" href="class_local_user.html#a8e458741c7ebc8603f5868bd241a34ec">00670</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a8e458741c7ebc8603f5868bd241a34ec">cmds_in</a>;
<a name="l00671"></a>00671 
<a name="l00674"></a><a class="code" href="class_local_user.html#aacb51ebcabaa14d7e55a30d74aea4b0b">00674</a>         <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#aacb51ebcabaa14d7e55a30d74aea4b0b">cmds_out</a>;
<a name="l00675"></a>00675 
<a name="l00680"></a><a class="code" href="class_local_user.html#adf097769d06e62daefc26973112c7dd6">00680</a>         std::string <a class="code" href="class_local_user.html#adf097769d06e62daefc26973112c7dd6">password</a>;
<a name="l00681"></a>00681 
<a name="l00684"></a><a class="code" href="class_local_user.html#a490f4f7dddd5f5bb8c5c07fffa6eb916">00684</a>         <a class="code" href="classreference.html">reference&lt;ConnectClass&gt;</a> <a class="code" href="class_local_user.html#a490f4f7dddd5f5bb8c5c07fffa6eb916">MyClass</a>;
<a name="l00685"></a>00685 
<a name="l00688"></a>00688         <span class="keywordtype">void</span> CheckClass();
<a name="l00689"></a>00689 
<a name="l00692"></a><a class="code" href="class_local_user.html#a6c148230f483862230f1ffe1a141fe6c">00692</a>         <a class="code" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> <a class="code" href="class_local_user.html#a6c148230f483862230f1ffe1a141fe6c">server_sa</a>;
<a name="l00693"></a>00693 
<a name="l00697"></a>00697         <span class="keywordtype">int</span> GetServerPort();
<a name="l00698"></a>00698 
<a name="l00701"></a><a class="code" href="class_local_user.html#a1ffe0d9a22725260c11c89e2dda7a030">00701</a>         time_t <a class="code" href="class_local_user.html#a1ffe0d9a22725260c11c89e2dda7a030">nping</a>;
<a name="l00702"></a>00702 
<a name="l00706"></a><a class="code" href="class_local_user.html#a2adf8af568e3a8700d53a99bc8cf6667">00706</a>         time_t <a class="code" href="class_local_user.html#a2adf8af568e3a8700d53a99bc8cf6667">overrun_start</a>;
<a name="l00707"></a>00707 
<a name="l00711"></a><a class="code" href="class_local_user.html#a41882847ff97c21107fbcbff4c83bf16">00711</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_local_user.html#a41882847ff97c21107fbcbff4c83bf16">CommandFloodPenalty</a>;
<a name="l00712"></a>00712 
<a name="l00713"></a>00713         <span class="keyword">static</span> already_sent_t already_sent_id;
<a name="l00714"></a>00714         already_sent_t already_sent;
<a name="l00715"></a>00715 
<a name="l00718"></a><a class="code" href="class_local_user.html#af0a47d75eeaedddc8b8ba14d4f97e580">00718</a>         std::string <a class="code" href="class_local_user.html#af0a47d75eeaedddc8b8ba14d4f97e580">stored_host</a>;
<a name="l00719"></a>00719 
<a name="l00724"></a>00724         <span class="keywordtype">void</span> StartDNSLookup();
<a name="l00725"></a>00725 
<a name="l00729"></a>00729         <span class="keywordtype">void</span> FullConnect();
<a name="l00730"></a>00730 
<a name="l00735"></a>00735         <span class="keywordtype">void</span> SetClass(<span class="keyword">const</span> std::string &amp;explicit_name = <span class="stringliteral">&quot;&quot;</span>);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737         <span class="keywordtype">void</span> SendText(<span class="keyword">const</span> std::string&amp; line);
<a name="l00738"></a>00738         <span class="keywordtype">void</span> Write(<span class="keyword">const</span> std::string&amp; text);
<a name="l00739"></a>00739         <span class="keywordtype">void</span> Write(<span class="keyword">const</span> <span class="keywordtype">char</span>*, ...) CUSTOM_PRINTF(2, 3);
<a name="l00740"></a>00740 
<a name="l00744"></a>00744         InvitedList* GetInviteList();
<a name="l00745"></a>00745 
<a name="l00750"></a>00750         <span class="keywordtype">bool</span> IsInvited(const irc::<span class="keywordtype">string</span> &amp;channel);
<a name="l00751"></a>00751 
<a name="l00756"></a>00756         <span class="keywordtype">void</span> InviteTo(const irc::<span class="keywordtype">string</span> &amp;channel, time_t timeout);
<a name="l00757"></a>00757 
<a name="l00763"></a>00763         <span class="keywordtype">void</span> RemoveInvite(const irc::<span class="keywordtype">string</span> &amp;channel);
<a name="l00764"></a>00764 
<a name="l00771"></a>00771         <span class="keywordtype">bool</span> HasPermission(const std::<span class="keywordtype">string</span> &amp;command);
<a name="l00772"></a>00772 
<a name="l00781"></a>00781         <span class="keywordtype">bool</span> HasPrivPermission(const std::<span class="keywordtype">string</span> &amp;privstr, <span class="keywordtype">bool</span> noisy = false);
<a name="l00782"></a>00782 
<a name="l00789"></a>00789         <span class="keywordtype">bool</span> HasModePermission(<a class="code" href="class_mode_i_d.html">ModeID</a> mode);
<a name="l00790"></a>00790 
<a name="l00791"></a>00791         virtual ~<a class="code" href="class_local_user.html">LocalUser</a>();
<a name="l00792"></a>00792 };
<a name="l00793"></a>00793 
<a name="l00794"></a><a class="code" href="class_fake_user.html">00794</a> class CoreExport <a class="code" href="class_fake_user.html">FakeUser</a> : public User
<a name="l00795"></a>00795 {
<a name="l00796"></a>00796  <span class="keyword">public</span>:
<a name="l00797"></a>00797         <a class="code" href="class_fake_user.html">FakeUser</a>(<span class="keyword">const</span> std::string &amp;uid, <span class="keyword">const</span> std::string&amp; srv) : User(uid, srv, USERTYPE_SERVER)
<a name="l00798"></a>00798         {
<a name="l00799"></a>00799                 nick = srv;
<a name="l00800"></a>00800         }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="keyword">virtual</span> <a class="code" href="class_cull_result.html">CullResult</a> <a class="code" href="class_extensible.html#a11e8ad72ea9557b4e88c87121858a155">cull</a>();
<a name="l00803"></a>00803         <span class="keyword">virtual</span> <span class="keywordtype">void</span> SendText(<span class="keyword">const</span> std::string&amp; line);
<a name="l00804"></a>00804         <span class="keyword">virtual</span> <span class="keyword">const</span> std::string&amp; GetFullHost();
<a name="l00805"></a>00805 };
<a name="l00806"></a>00806 
<a name="l00807"></a>00807 <span class="comment">/* Faster than dynamic_cast */</span>
<a name="l00809"></a>00809 <span class="keyword">inline</span> <a class="code" href="class_local_user.html">LocalUser</a>* IS_LOCAL(User* u)
<a name="l00810"></a>00810 {
<a name="l00811"></a>00811         <span class="keywordflow">return</span> u-&gt;<a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">usertype</a> == USERTYPE_LOCAL ? <span class="keyword">static_cast&lt;</span><a class="code" href="class_local_user.html">LocalUser</a>*<span class="keyword">&gt;</span>(u) : NULL;
<a name="l00812"></a>00812 }
<a name="l00814"></a>00814 <span class="keyword">inline</span> <a class="code" href="class_fake_user.html">FakeUser</a>* IS_SERVER(User* u)
<a name="l00815"></a>00815 {
<a name="l00816"></a>00816         <span class="keywordflow">return</span> u-&gt;<a class="code" href="class_user.html#a982fa3195231117b83dde5b90ffd4685">usertype</a> == USERTYPE_SERVER ? <span class="keyword">static_cast&lt;</span><a class="code" href="class_fake_user.html">FakeUser</a>*<span class="keyword">&gt;</span>(u) : NULL;
<a name="l00817"></a>00817 }
<a name="l00819"></a>00819 <span class="preprocessor">#define IS_OPER(x) (x-&gt;oper)</span>
<a name="l00820"></a>00820 <span class="preprocessor"></span>
<a name="l00821"></a>00821 <span class="preprocessor">#define IS_AWAY(x) (!x-&gt;awaymsg.empty())</span>
<a name="l00822"></a>00822 <span class="preprocessor"></span>
<a name="l00823"></a>00823 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
