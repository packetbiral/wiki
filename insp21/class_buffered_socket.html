<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>InspIRCd: BufferedSocket Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">2.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">BufferedSocket Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="inspsocket_8h_source.html">inspsocket.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BufferedSocket:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_buffered_socket.png" usemap="#BufferedSocket_map" alt=""/>
  <map id="BufferedSocket_map" name="BufferedSocket_map">
<area href="class_stream_socket.html" alt="StreamSocket" shape="rect" coords="60,112,171,136"/>
<area href="class_event_handler.html" alt="EventHandler" shape="rect" coords="60,56,171,80"/>
<area href="classclassbase.html" alt="classbase" shape="rect" coords="60,0,171,24"/>
<area href="class_http_server_socket.html" alt="HttpServerSocket" shape="rect" coords="0,224,111,248"/>
<area href="class_tree_socket.html" alt="TreeSocket" shape="rect" coords="121,224,232,248"/>
</map>
 </div></div>

<p><a href="class_buffered_socket-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a13700ce82624c151ed13e5dca9dfed1c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a13700ce82624c151ed13e5dca9dfed1c">BufferedSocket</a> (int newfd)</td></tr>
<tr class="memitem:ad131d03043211c664d5f11ca8080c9c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#ad131d03043211c664d5f11ca8080c9c6">DoConnect</a> (const std::string &amp;ipaddr, int aport, unsigned long maxtime, const std::string &amp;connectbindip)</td></tr>
<tr class="memitem:a19a2114196259727718aae840892c4e5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a19a2114196259727718aae840892c4e5">OnConnected</a> ()</td></tr>
<tr class="memitem:a075e598f615882452e5dab70b460f475"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a075e598f615882452e5dab70b460f475">OnDataReady</a> ()=0</td></tr>
<tr class="memitem:a3b39cecd363bf59f70fc7b22acf11a86"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a3b39cecd363bf59f70fc7b22acf11a86">OnTimeout</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a716c88c2e8eb56ab6df19226b02dfaac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_socket_timeout.html">SocketTimeout</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a716c88c2e8eb56ab6df19226b02dfaac">Timeout</a></td></tr>
<tr class="memitem:a804ebaa3eddafd9d69e1fc74ff7ff858"><td class="memItemLeft" align="right" valign="top">BufferedSocketState&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a804ebaa3eddafd9d69e1fc74ff7ff858">state</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1351ab8d251cbe40eb567949f28107e3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_buffered_socket.html#a1351ab8d251cbe40eb567949f28107e3">DoWrite</a> ()</td></tr>
<tr class="memitem:a271a84f6aebbc38df1e7ca1801e4934b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a271a84f6aebbc38df1e7ca1801e4934b"></a>
BufferedSocketError&#160;</td><td class="memItemRight" valign="bottom"><b>BeginConnect</b> (const <a class="el" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> &amp;dest, const <a class="el" href="unionirc_1_1sockets_1_1sockaddrs.html">irc::sockets::sockaddrs</a> &amp;bind, unsigned long timeout)</td></tr>
<tr class="memitem:aca0e567dff1d925e90b4ed7ccd8009ac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca0e567dff1d925e90b4ed7ccd8009ac"></a>
BufferedSocketError&#160;</td><td class="memItemRight" valign="bottom"><b>BeginConnect</b> (const std::string &amp;ipaddr, int aport, unsigned long maxtime, const std::string &amp;connectbindip)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_buffered_socket.html">BufferedSocket</a> is an extendable socket class which modules can use for TCP socket support. It is fully integrated into InspIRCds socket loop and attaches its sockets to the core's instance of the <a class="el" href="class_socket_engine.html">SocketEngine</a> class, meaning that all use is fully asynchronous.</p>
<p>To use <a class="el" href="class_buffered_socket.html">BufferedSocket</a>, you must inherit a class from it. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a13700ce82624c151ed13e5dca9dfed1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferedSocket::BufferedSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newfd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This constructor is used to associate an existing connecting with an <a class="el" href="class_buffered_socket.html">BufferedSocket</a> class. The given file descriptor must be valid, and when initialized, the <a class="el" href="class_buffered_socket.html">BufferedSocket</a> will be placed in CONNECTED state. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad131d03043211c664d5f11ca8080c9c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_buffered_socket.html#ad131d03043211c664d5f11ca8080c9c6">BufferedSocket::DoConnect</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>aport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>maxtime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>connectbindip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Begin connection to the given address This will create a socket, register with socket engine, and start the asynchronous connection process. If an error is detected at this point (such as out of file descriptors), OnError will be called; otherwise, the state will become CONNECTING. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Address to connect to </td></tr>
    <tr><td class="paramname">bind</td><td>Address to bind to (if NULL, no bind will be done) </td></tr>
    <tr><td class="paramname">timeout</td><td>Time to wait for connection </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1351ab8d251cbe40eb567949f28107e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_buffered_socket.html#a1351ab8d251cbe40eb567949f28107e3">BufferedSocket::DoWrite</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dispatched from HandleEvent </p>

<p>Reimplemented from <a class="el" href="class_stream_socket.html#a7d5219ca91425813c92cc09f7cf634ef">StreamSocket</a>.</p>

</div>
</div>
<a class="anchor" id="a19a2114196259727718aae840892c4e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_buffered_socket.html#a19a2114196259727718aae840892c4e5">BufferedSocket::OnConnected</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method is called when an outbound connection on your socket is completed. </p>

<p>Reimplemented in <a class="el" href="class_tree_socket.html#ad7194be97a08123169929624b21a711f">TreeSocket</a>.</p>

</div>
</div>
<a class="anchor" id="a075e598f615882452e5dab70b460f475"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="class_buffered_socket.html#a075e598f615882452e5dab70b460f475">BufferedSocket::OnDataReady</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When there is data waiting to be read on a socket, the <a class="el" href="class_buffered_socket.html#a075e598f615882452e5dab70b460f475">OnDataReady()</a> method is called. </p>

<p>Implements <a class="el" href="class_stream_socket.html#ada38f54ce3fca4cac5cfa1fa6d04b126">StreamSocket</a>.</p>

<p>Implemented in <a class="el" href="class_tree_socket.html#a424f1912d2aefdbf4c1da87519338878">TreeSocket</a>, and <a class="el" href="class_http_server_socket.html#a0ccb7a50ba95b2aac54f19189ce20444">HttpServerSocket</a>.</p>

</div>
</div>
<a class="anchor" id="a3b39cecd363bf59f70fc7b22acf11a86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_buffered_socket.html#a3b39cecd363bf59f70fc7b22acf11a86">BufferedSocket::OnTimeout</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When an outbound connection fails, and the attempt times out, you will receive this event. The method will trigger once maxtime seconds are reached (as given in the constructor) just before the socket's descriptor is closed. A failed <a class="el" href="class_d_n_s.html">DNS</a> lookup may cause this event if the <a class="el" href="class_d_n_s.html">DNS</a> server is not responding, as well as a failed connect() call, because <a class="el" href="class_d_n_s.html">DNS</a> lookups are nonblocking as implemented by this class. </p>

<p>Reimplemented in <a class="el" href="class_tree_socket.html#a6b6a9ffc69ffcdbecebe839744b3c508">TreeSocket</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a804ebaa3eddafd9d69e1fc74ff7ff858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferedSocketState <a class="el" href="class_buffered_socket.html#a804ebaa3eddafd9d69e1fc74ff7ff858">BufferedSocket::state</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The state for this socket, either listening, connecting, connected or error. </p>

</div>
</div>
<a class="anchor" id="a716c88c2e8eb56ab6df19226b02dfaac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_socket_timeout.html">SocketTimeout</a>* <a class="el" href="class_buffered_socket.html#a716c88c2e8eb56ab6df19226b02dfaac">BufferedSocket::Timeout</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Timeout object or NULL </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="inspsocket_8h_source.html">inspsocket.h</a></li>
<li>src/inspsocket.cpp</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
